<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>医学影像分析</title>
    <link>https://nazelto.github.io/medical-imaging/</link>
    <description>医学影像分析</description>
    <generator>Hugo 0.152.2 &amp; FixIt v0.4.0-alpha.3-20251128065536-6d00e42b</generator>
    <language>zn-ch</language>
    <lastBuildDate>Wed, 03 Dec 2025 10:12:07 +0800</lastBuildDate>
    <atom:link href="https://nazelto.github.io/medical-imaging/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>项目详细介绍</title>
      <link>https://nazelto.github.io/medical-imaging/posts/detailed_introduction/</link>
      <pubDate>Wed, 03 Dec 2025 10:12:07 +0800</pubDate>
      <guid>https://nazelto.github.io/medical-imaging/posts/detailed_introduction/</guid>
      <category domain="https://nazelto.github.io/medical-imaging/categories/introduction/">Introduction</category>
      <description>&lt;h1 class=&#34;heading-element&#34; id=&#34;医疗影像分析系统---项目详细介绍&#34;&gt;&lt;span&gt;医疗影像分析系统 - 项目详细介绍&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8c%bb%e7%96%97%e5%bd%b1%e5%83%8f%e5%88%86%e6%9e%90%e7%b3%bb%e7%bb%9f---%e9%a1%b9%e7%9b%ae%e8%af%a6%e7%bb%86%e4%bb%8b%e7%bb%8d&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h1&gt;&lt;h2 class=&#34;heading-element&#34; id=&#34;项目概述&#34;&gt;&lt;span&gt;项目概述&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%a1%b9%e7%9b%ae%e6%a6%82%e8%bf%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;这是一个基于视觉语言模型（VLM）的医疗影像智能分析系统，能够对医学影像（如X光片、CT扫描、MRI等）进行自动分类、特征提取和诊断辅助。系统采用前后端分离架构，提供友好的Web界面和强大的命令行工具。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心技术栈：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;后端：&lt;/strong&gt; Python 3.10+, Django 5.2, Pillow&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;前端：&lt;/strong&gt; React 19, TypeScript, Vite, Fluent UI v9&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;AI模型：&lt;/strong&gt; 阿里云通义千问 VLM (qwen3-vl-plus)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;一后端系统详解&#34;&gt;&lt;span&gt;一、后端系统详解&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%80%e5%90%8e%e7%ab%af%e7%b3%bb%e7%bb%9f%e8%af%a6%e8%a7%a3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;11-整体架构&#34;&gt;&lt;span&gt;1.1 整体架构&lt;/span&gt;&#xA;  &lt;a href=&#34;#11-%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;后端采用分层架构设计：&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;12-核心模块功能详解&#34;&gt;&lt;span&gt;1.2 核心模块功能详解&lt;/span&gt;&#xA;  &lt;a href=&#34;#12-%e6%a0%b8%e5%bf%83%e6%a8%a1%e5%9d%97%e5%8a%9f%e8%83%bd%e8%af%a6%e8%a7%a3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;121-vlm-api客户端-api_clientpy&#34;&gt;&lt;span&gt;1.2.1 VLM API客户端 (&lt;code&gt;api_client.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#121-vlm-api%e5%ae%a2%e6%88%b7%e7%ab%af-api_clientpy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;类：&lt;code&gt;VLMClient&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt; 封装与阿里云通义千问VLM服务的HTTP通信，负责发送图像和提示词，接收AI分析结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;__init__(api_key,&amp;ensp;base_url,&amp;ensp;model_name)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 初始化客户端，创建HTTP会话&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;api_key&lt;/code&gt;: API密钥（默认：sk-854d708e4615444689646f3f7f979b8b）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;base_url&lt;/code&gt;: API基础URL（默认：https://dashscope.aliyuncs.com/compatible-mode/v1）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;model_name&lt;/code&gt;: 模型名称（默认：qwen3-vl-plus）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现原理：&lt;/strong&gt; 使用&lt;code&gt;requests.Session()&lt;/code&gt;创建可复用的HTTP会话，设置认证头和内容类型，提高性能&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt; Session对象可以复用TCP连接，避免每次请求都建立新连接，提升效率&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;call(messages,&amp;ensp;max_tokens,&amp;ensp;temperature)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 调用VLM API进行推理&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;messages&lt;/code&gt;: 消息列表，包含文本提示词和Base64编码的图像&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;max_tokens&lt;/code&gt;: 最大生成令牌数（默认2000）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;temperature&lt;/code&gt;: 生成温度（默认0.3，低随机性）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;构建API端点URL（base_url + &amp;ldquo;/chat/completions&amp;rdquo;）&lt;/li&gt;&#xA;&lt;li&gt;组装请求负载（模型名、消息、参数）&lt;/li&gt;&#xA;&lt;li&gt;发送POST请求（超时120秒）&lt;/li&gt;&#xA;&lt;li&gt;解析响应JSON，提取&lt;code&gt;choices[0].message.content&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; 模型生成的文本响应&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt; 遵循OpenAI兼容的API格式，便于切换不同的VLM服务提供商&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 关闭HTTP会话，释放资源&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用时机：&lt;/strong&gt; 分析完成后或程序退出前&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 避免资源泄漏，确保连接正确关闭&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;上下文管理器支持：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;&amp;ensp;VLMClient(api_key,&amp;ensp;base_url,&amp;ensp;model_name)&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;client:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(messages)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;自动调用close()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;122-医学影像分析器-analyzerpy&#34;&gt;&lt;span&gt;1.2.2 医学影像分析器 (&lt;code&gt;analyzer.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#122-%e5%8c%bb%e5%ad%a6%e5%bd%b1%e5%83%8f%e5%88%86%e6%9e%90%e5%99%a8-analyzerpy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;类：&lt;code&gt;MedicalImageAnalyzer&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt; 系统的核心引擎，提供医学影像分类、目标检测、批量分析等功能。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;classify_image(image_path,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 对单张医学影像进行分类&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt;: 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt;: 可选的分类类别列表（如[&amp;ldquo;Normal&amp;rdquo;, &amp;ldquo;Pneumonia&amp;rdquo;]）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证图像文件是否存在&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;encode_image_to_base64()&lt;/code&gt;将图像编码为Base64&lt;/li&gt;&#xA;&lt;li&gt;根据是否提供类别列表构建不同的提示词：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;有类别：&lt;/strong&gt; 要求模型在指定类别中选择&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;无类别：&lt;/strong&gt; 开放式分类，模型自由判断&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;VLMClient.call()&lt;/code&gt;发送请求&lt;/li&gt;&#xA;&lt;li&gt;使用&lt;code&gt;extract_json_from_text()&lt;/code&gt;从响应中提取JSON结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; 包含以下字段的字典&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;success&lt;/code&gt;: 是否成功&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt;: 图像路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;result&lt;/code&gt;: 分类结果（image_type, category, confidence, features, reasoning, abnormal）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;full_response&lt;/code&gt;: 完整响应文本&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;灵活支持有监督和无监督分类&lt;/li&gt;&#xA;&lt;li&gt;提示词工程确保模型返回结构化JSON&lt;/li&gt;&#xA;&lt;li&gt;异常处理确保系统稳定性&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;detect_objects(image_path,&amp;ensp;target_objects,&amp;ensp;classification_result)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 在医学影像中检测目标对象（如病灶、肿瘤）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt;: 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;target_objects&lt;/code&gt;: 可选的目标对象列表&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;classification_result&lt;/code&gt;: 可选的分类结果，用于提供上下文&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证图像文件&lt;/li&gt;&#xA;&lt;li&gt;编码图像为Base64&lt;/li&gt;&#xA;&lt;li&gt;如果提供了分类结果，提取上下文信息：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如果分类为异常（非&amp;quot;正常&amp;quot;），添加特殊提示强调检测异常区域&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;构建提示词要求模型返回边界框坐标&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API&lt;/li&gt;&#xA;&lt;li&gt;提取JSON结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; 包含检测到的对象列表，每个对象包含：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;type&lt;/code&gt;: 对象类型&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;bbox&lt;/code&gt;: 边界框坐标[x_min, y_min, x_max, y_max]（归一化到0-1）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;confidence&lt;/code&gt;: 置信度&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;size&lt;/code&gt;: 大小描述&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;description&lt;/code&gt;: 详细描述&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;利用分类结果作为上下文，提高检测准确性&lt;/li&gt;&#xA;&lt;li&gt;归一化坐标便于不同尺寸图像的处理&lt;/li&gt;&#xA;&lt;li&gt;特殊提示确保模型不会遗漏小病灶&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;analyze_images(image_paths,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 分析单张或多张医学影像（智能路由）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_paths&lt;/code&gt;: 单个路径、路径列表或文件夹路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt;: 可选的分类类别列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;规范化输入：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如果是字符串且为文件夹，调用&lt;code&gt;get_image_files_from_folder()&lt;/code&gt;获取所有图像&lt;/li&gt;&#xA;&lt;li&gt;如果是单个文件，转换为列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;验证所有文件是否存在&lt;/li&gt;&#xA;&lt;li&gt;根据图像数量选择分析方式：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;单张：&lt;/strong&gt; 调用&lt;code&gt;_analyze_single_image()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;多张：&lt;/strong&gt; 调用&lt;code&gt;_analyze_multiple_images()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt; 提供统一的入口点，自动处理不同输入格式，简化调用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;_analyze_multiple_images(image_paths,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 批量分析多张图像，自动分组和生成解释&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;对每张图像调用&lt;code&gt;classify_image()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;按诊断类别对结果进行分组：&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;grouped_images&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Pneumonia&amp;#34;&lt;/span&gt;:&amp;ensp;[result1,&amp;ensp;result2,&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Normal&amp;#34;&lt;/span&gt;:&amp;ensp;[result3,&amp;ensp;result4,&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;_explain_classification_groups()&lt;/code&gt;为每个类别生成解释&lt;/li&gt;&#xA;&lt;li&gt;计算统计信息（类别数、分布）&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; 包含以下字段的字典&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;total_images&lt;/code&gt;: 图像总数&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;classification_results&lt;/code&gt;: 所有分类结果列表&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;grouped_by_category&lt;/code&gt;: 按类别分组的结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;explanations&lt;/code&gt;: 每个类别的解释说明&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;statistics&lt;/code&gt;: 统计信息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;自动分组便于医生快速查看相同诊断的图像&lt;/li&gt;&#xA;&lt;li&gt;统计信息提供整体概览&lt;/li&gt;&#xA;&lt;li&gt;解释说明帮助理解分类依据&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;_explain_classification_groups(grouped_images)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 为每个分类类别生成解释说明&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;参数：&lt;/strong&gt; 按类别分组的图像结果字典&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;遍历每个类别&lt;/li&gt;&#xA;&lt;li&gt;提取该类别中所有图像的特征、推理、置信度&lt;/li&gt;&#xA;&lt;li&gt;构建包含所有图像信息的提示词&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API生成解释，要求分析：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;共同特征&lt;/li&gt;&#xA;&lt;li&gt;分类原因&lt;/li&gt;&#xA;&lt;li&gt;相似性&lt;/li&gt;&#xA;&lt;li&gt;差异性&lt;/li&gt;&#xA;&lt;li&gt;总结&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;提取JSON结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; 每个类别的解释字典&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;利用VLM的推理能力生成人类可读的解释&lt;/li&gt;&#xA;&lt;li&gt;帮助医生理解为什么这些图像被分为同一类&lt;/li&gt;&#xA;&lt;li&gt;识别类别内的细微差异&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;123-工具函数-utilspy&#34;&gt;&lt;span&gt;1.2.3 工具函数 (&lt;code&gt;utils.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#123-%e5%b7%a5%e5%85%b7%e5%87%bd%e6%95%b0-utilspy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;encode_image_to_base64(image_path)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 将图像文件编码为Base64字符串&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;&amp;ensp;open(image_path,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rb&amp;#34;&lt;/span&gt;)&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;image_file:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;base64&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;b64encode(image_file&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read())&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;decode(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; VLM API要求图像以Base64格式传输，便于在JSON中嵌入&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;extract_json_from_text(text)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 从VLM响应文本中提取JSON对象&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现原理：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;查找第一个&lt;code&gt;{&lt;/code&gt;的位置&lt;/li&gt;&#xA;&lt;li&gt;查找最后一个&lt;code&gt;}&lt;/code&gt;的位置&lt;/li&gt;&#xA;&lt;li&gt;提取中间部分并解析为JSON&lt;/li&gt;&#xA;&lt;li&gt;如果失败，返回&lt;code&gt;{&amp;quot;raw_response&amp;quot;:&amp;ensp;text}&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; VLM可能在JSON前后添加额外文本，需要智能提取&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;get_image_files_from_folder(folder_path)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 递归扫描文件夹，获取所有图像文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;支持格式：&lt;/strong&gt; .jpg, .jpeg, .png, .bmp, .gif, .webp, .tiff, .tif&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;image_files&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;str(file_path)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;&amp;ensp;file_path&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;folder&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;rglob(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;file_path&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;is_file()&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;and&lt;/span&gt;&amp;ensp;file_path&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;suffix&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;lower()&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;image_extensions&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;sorted(image_files)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;rglob(&amp;quot;*&amp;quot;)&lt;/code&gt;递归查找所有文件&lt;/li&gt;&#xA;&lt;li&gt;排序确保结果一致性&lt;/li&gt;&#xA;&lt;li&gt;支持多种医学影像格式&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;124-类型定义-typespy&#34;&gt;&lt;span&gt;1.2.4 类型定义 (&lt;code&gt;types.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#124-%e7%b1%bb%e5%9e%8b%e5%ae%9a%e4%b9%89-typespy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt; 使用TypedDict定义数据结构，提供类型提示和代码可读性。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心类型：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;ClassificationResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;ClassificationResult&lt;/span&gt;(TypedDict,&amp;ensp;total&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;success:&amp;ensp;bool&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;image_path:&amp;ensp;str&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result:&amp;ensp;dict[str,&amp;ensp;Any]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;full_response:&amp;ensp;str&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;error:&amp;ensp;str&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;DetectionResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;DetectionResult&lt;/span&gt;(TypedDict,&amp;ensp;total&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;success:&amp;ensp;bool&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;image_path:&amp;ensp;str&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result:&amp;ensp;dict[str,&amp;ensp;Any]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;full_response:&amp;ensp;str&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;error:&amp;ensp;str&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;AnalysisResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;AnalysisResult&lt;/span&gt;(TypedDict,&amp;ensp;total&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;total_images:&amp;ensp;int&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;classification_results:&amp;ensp;list[ClassificationResult]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;grouped_by_category:&amp;ensp;dict[str,&amp;ensp;list[ClassificationResult]]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;explanations:&amp;ensp;dict[str,&amp;ensp;Any]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;statistics:&amp;ensp;dict[str,&amp;ensp;Any]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用TypedDict：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提供类型检查，减少运行时错误&lt;/li&gt;&#xA;&lt;li&gt;保持字典的灵活性&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;total=False&lt;/code&gt;允许所有字段可选&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;13-django-web服务层&#34;&gt;&lt;span&gt;1.3 Django Web服务层&lt;/span&gt;&#xA;  &lt;a href=&#34;#13-django-web%e6%9c%8d%e5%8a%a1%e5%b1%82&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;131-业务服务-servicespy&#34;&gt;&lt;span&gt;1.3.1 业务服务 (&lt;code&gt;services.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#131-%e4%b8%9a%e5%8a%a1%e6%9c%8d%e5%8a%a1-servicespy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;类：&lt;code&gt;FileHandlerService&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt; 处理文件上传、验证和临时存储。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;validate_file_format(filename)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 验证文件格式是否支持&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;支持格式：&lt;/strong&gt; jpg, jpeg, png, dcm, dicom, bmp, tiff, tif&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; &lt;code&gt;(is_valid,&amp;ensp;error_message)&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 防止上传不支持的文件类型，提前拦截错误&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;save_temp_file(uploaded_file)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 保存上传的文件到临时目录&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证文件格式&lt;/li&gt;&#xA;&lt;li&gt;生成唯一文件名（UUID + 原扩展名）&lt;/li&gt;&#xA;&lt;li&gt;分块写入文件&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用UUID：&lt;/strong&gt; 避免文件名冲突，确保唯一性&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;cleanup_old_files(max_age_seconds)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 清理超过指定时间的临时文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;默认时间：&lt;/strong&gt; 3600秒（1小时）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 遍历临时目录，检查文件修改时间，删除过期文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 防止临时文件堆积，节省磁盘空间&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;类：&lt;code&gt;AnalysisService&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt; 封装医学影像分析业务逻辑，连接Django和核心分析器。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;__init__()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 初始化分析服务&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;api_key&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;environ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;VLM_API_KEY&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;默认值&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;base_url&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;environ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;VLM_BASE_URL&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;默认值&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;model_name&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;environ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;VLM_MODEL_NAME&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;默认值&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;analyzer&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;MedicalImageAnalyzer(api_key,&amp;ensp;base_url,&amp;ensp;model_name)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么写：&lt;/strong&gt; 从环境变量读取配置，便于部署时修改，提供默认值确保开发环境可用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;analyze_single_image(image_path,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 分析单张图像&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;调用&lt;code&gt;analyzer.classify_image()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;转换绝对路径为相对路径（用于前端访问）&lt;/li&gt;&#xA;&lt;li&gt;格式化返回结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回格式：&lt;/strong&gt;&#xA;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;result&#34;: {&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;abnormal&#34;: true,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;category&#34;: &#34;Pneumonia&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;confidence&#34;: 85.5,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;features&#34;: &#34;...&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;image_path&#34;: &#34;temp/uuid.jpg&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;image_type&#34;: &#34;X光片&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;reasoning&#34;: &#34;...&#34;&#xA;&amp;ensp;&amp;ensp;},&#xA;&amp;ensp;&amp;ensp;&#34;success&#34;: true,&#xA;&amp;ensp;&amp;ensp;&#34;type&#34;: &#34;single&#34;&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;analyze_multiple_images(image_paths,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 分析多张图像&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证所有文件存在&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;analyzer.analyze_images()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;转换所有图像路径为相对路径&lt;/li&gt;&#xA;&lt;li&gt;格式化解释说明&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回格式：&lt;/strong&gt;&#xA;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;explanations&#34;: {},&#xA;&amp;ensp;&amp;ensp;&#34;grouped_by_category&#34;: {},&#xA;&amp;ensp;&amp;ensp;&#34;statistics&#34;: {},&#xA;&amp;ensp;&amp;ensp;&#34;success&#34;: true,&#xA;&amp;ensp;&amp;ensp;&#34;total_images&#34;: 10,&#xA;&amp;ensp;&amp;ensp;&#34;type&#34;: &#34;multiple&#34;&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;_get_relative_image_path(absolute_path)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 转换绝对路径为相对路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 计算相对于项目根目录的路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 前端需要通过URL访问图像，不能使用绝对路径&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;132-api视图-viewspy&#34;&gt;&lt;span&gt;1.3.2 API视图 (&lt;code&gt;views.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#132-api%e8%a7%86%e5%9b%be-viewspy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;核心视图函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;analyze_images(request)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;HTTP方法：&lt;/strong&gt; POST&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;路由：&lt;/strong&gt; &lt;code&gt;/api/analyze/&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 处理图像上传和分析请求&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;请求格式：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Content-Type: multipart/form-data&lt;/li&gt;&#xA;&lt;li&gt;images: File[] - 一个或多个图像文件&lt;/li&gt;&#xA;&lt;li&gt;categories: string (JSON数组) - 可选的分类类别&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;处理流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;获取上传的文件列表&lt;/li&gt;&#xA;&lt;li&gt;验证至少有一个文件&lt;/li&gt;&#xA;&lt;li&gt;解析categories参数（JSON字符串）&lt;/li&gt;&#xA;&lt;li&gt;初始化FileHandlerService和AnalysisService&lt;/li&gt;&#xA;&lt;li&gt;保存所有临时文件（验证格式）&lt;/li&gt;&#xA;&lt;li&gt;根据文件数量调用相应的分析方法&lt;/li&gt;&#xA;&lt;li&gt;返回分析结果（不立即删除临时文件，供前端显示）&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;错误处理：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;NO_FILES: 未上传文件&lt;/li&gt;&#xA;&lt;li&gt;INVALID_CATEGORIES: 类别格式无效&lt;/li&gt;&#xA;&lt;li&gt;INVALID_FILE_FORMAT: 文件格式不支持&lt;/li&gt;&#xA;&lt;li&gt;INTERNAL_ERROR: 服务器内部错误&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么不立即删除临时文件：&lt;/strong&gt; 前端需要显示图像，文件由定时任务清理&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;get_categories(request)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;HTTP方法：&lt;/strong&gt; GET&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;路由：&lt;/strong&gt; &lt;code&gt;/api/categories/&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 获取预定义的分类类别&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回格式：&lt;/strong&gt;&#xA;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;categories&#34;: [&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;Normal&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;Pneumonia&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;Tuberculosis&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;Lung Cancer&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;Other Abnormalities&#34;&#xA;&amp;ensp;&amp;ensp;]&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 前端可以动态获取类别列表，便于扩展&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;export_results(request)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;HTTP方法：&lt;/strong&gt; POST&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;路由：&lt;/strong&gt; &lt;code&gt;/api/export/&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 导出分析结果为JSON文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;请求格式：&lt;/strong&gt;&#xA;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;results&#34;: {}&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回：&lt;/strong&gt; JSON文件下载（Content-Disposition: attachment）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么实现：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;服务器端生成JSON确保格式正确&lt;/li&gt;&#xA;&lt;li&gt;使用attachment头触发浏览器下载&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;133-django配置-settingspy&#34;&gt;&lt;span&gt;1.3.3 Django配置 (&lt;code&gt;settings.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#133-django%e9%85%8d%e7%bd%ae-settingspy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;关键配置：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;CORS设置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CORS_ALLOW_ALL_ORIGINS&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;CORS_ALLOW_CREDENTIALS&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;作用：&lt;/strong&gt; 允许前端跨域访问API&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 前端运行在3000端口，后端在8000端口&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;文件上传设置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FILE_UPLOAD_MAX_MEMORY_SIZE&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#ae81ff&#34;&gt;52428800&lt;/span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;50MB&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DATA_UPLOAD_MAX_MEMORY_SIZE&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#ae81ff&#34;&gt;52428800&lt;/span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;50MB&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;作用：&lt;/strong&gt; 限制上传文件大小&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么是50MB：&lt;/strong&gt; 医学影像通常较大，但需要限制防止滥用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;临时文件设置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MEDIA_ROOT&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;BASE_DIR&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;temp&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;MEDIA_URL&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/temp/&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;TEMP_FILE_LIFETIME&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#ae81ff&#34;&gt;3600&lt;/span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;1小时&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;作用：&lt;/strong&gt; 配置临时文件存储位置和生命周期&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么1小时：&lt;/strong&gt; 平衡用户体验和磁盘空间&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;无数据库配置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DATABASES&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;{}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么不用数据库：&lt;/strong&gt; 系统不需要持久化存储，简化部署&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;14-命令行接口-clipy&#34;&gt;&lt;span&gt;1.4 命令行接口 (&lt;code&gt;cli.py&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#14-%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%8e%a5%e5%8f%a3-clipy&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;主函数：&lt;code&gt;main()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 提供命令行方式分析医学影像。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;调用流程：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;打印欢迎信息&lt;/li&gt;&#xA;&lt;li&gt;初始化&lt;code&gt;MedicalImageAnalyzer&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;定义分类类别列表&lt;/li&gt;&#xA;&lt;li&gt;获取图像路径：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;优先从命令行参数获取：&lt;code&gt;python&amp;ensp;-m&amp;ensp;medical_imaging&amp;ensp;image.jpg&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;否则交互式输入&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;验证路径是否存在&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;analyzer.analyze_images()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;根据结果类型选择打印函数：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;单张：&lt;code&gt;print_classification_results()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;多张：&lt;code&gt;print_multiple_analysis_results()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;异常处理和资源释放&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;辅助函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;print_classification_results(results)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 格式化打印单张图像分类结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;输出格式：&lt;/strong&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;============================================================&#xA;Classification&amp;ensp;Results&#xA;============================================================&#xA;&#xA;Image&amp;ensp;path:&amp;ensp;image.jpg&#xA;Image&amp;ensp;type:&amp;ensp;X光片&#xA;&#xA;【Image&amp;ensp;Feature&amp;ensp;Analysis】&#xA;------------------------------------------------------------&#xA;Key&amp;ensp;features:&#xA;&amp;ensp;&amp;ensp;肺部有明显的阴影区域...&#xA;&#xA;Analysis&amp;ensp;reasoning:&#xA;&amp;ensp;&amp;ensp;根据影像特征判断...&#xA;&#xA;【Classification&amp;ensp;Result】&#xA;------------------------------------------------------------&#xA;Diagnosis&amp;ensp;category:&amp;ensp;Pneumonia&#xA;Confidence:&amp;ensp;85.5%&#xA;Abnormal:&amp;ensp;Yes&#xA;&#xA;============================================================&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;print_multiple_analysis_results(results)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 格式化打印多张图像分析结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;输出内容：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;总体统计信息&lt;/li&gt;&#xA;&lt;li&gt;类别分布&lt;/li&gt;&#xA;&lt;li&gt;每个类别的解释说明&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么需要CLI：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;便于批量处理&lt;/li&gt;&#xA;&lt;li&gt;适合自动化脚本&lt;/li&gt;&#xA;&lt;li&gt;无需启动Web服务&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;15-后端调用关系图&#34;&gt;&lt;span&gt;1.5 后端调用关系图&lt;/span&gt;&#xA;  &lt;a href=&#34;#15-%e5%90%8e%e7%ab%af%e8%b0%83%e7%94%a8%e5%85%b3%e7%b3%bb%e5%9b%be&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;用户请求&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;Django&amp;ensp;Views&amp;ensp;(views.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;Analysis&amp;ensp;Service&amp;ensp;(services.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;Medical&amp;ensp;Image&amp;ensp;Analyzer&amp;ensp;(analyzer.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;VLM&amp;ensp;Client&amp;ensp;(api_client.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;阿里云通义千问&amp;ensp;VLM&amp;ensp;API&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;返回分析结果&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;数据流：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;用户上传图像 → Django接收&lt;/li&gt;&#xA;&lt;li&gt;保存临时文件 → FileHandlerService&lt;/li&gt;&#xA;&lt;li&gt;编码为Base64 → utils.encode_image_to_base64()&lt;/li&gt;&#xA;&lt;li&gt;构建提示词 → MedicalImageAnalyzer&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API → VLMClient.call()&lt;/li&gt;&#xA;&lt;li&gt;解析响应 → utils.extract_json_from_text()&lt;/li&gt;&#xA;&lt;li&gt;格式化结果 → AnalysisService&lt;/li&gt;&#xA;&lt;li&gt;返回前端 → Django Views&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;二前端系统详解&#34;&gt;&lt;span&gt;二、前端系统详解&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%ba%8c%e5%89%8d%e7%ab%af%e7%b3%bb%e7%bb%9f%e8%af%a6%e8%a7%a3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;21-整体架构&#34;&gt;&lt;span&gt;2.1 整体架构&lt;/span&gt;&#xA;  &lt;a href=&#34;#21-%e6%95%b4%e4%bd%93%e6%9e%b6%e6%9e%84&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;前端采用组件化架构设计：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;frontend/src/&#xA;├──&amp;ensp;components/&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;可复用组件&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;├──&amp;ensp;FileUpload.tsx&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;文件上传组件&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;├──&amp;ensp;MultipleResultsView.tsx&amp;ensp;&amp;ensp;#&amp;ensp;多图结果展示&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;├──&amp;ensp;StatisticsChart.tsx&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;统计图表&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;├──&amp;ensp;ExportButton.tsx&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;导出按钮&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;└──&amp;ensp;ErrorBoundary.tsx&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;错误边界&#xA;├──&amp;ensp;pages/&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;页面组件&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;└──&amp;ensp;AnalysisPage.tsx&amp;ensp;#&amp;ensp;主分析页面&#xA;├──&amp;ensp;services/&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;API服务&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;└──&amp;ensp;api.ts&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;后端API客户端&#xA;├──&amp;ensp;types/&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;TypeScript类型&#xA;│&amp;ensp;&amp;ensp;&amp;ensp;└──&amp;ensp;index.ts&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;类型定义&#xA;├──&amp;ensp;App.tsx&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;应用根组件&#xA;└──&amp;ensp;main.tsx&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;#&amp;ensp;应用入口&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;22-核心组件详解&#34;&gt;&lt;span&gt;2.2 核心组件详解&lt;/span&gt;&#xA;  &lt;a href=&#34;#22-%e6%a0%b8%e5%bf%83%e7%bb%84%e4%bb%b6%e8%af%a6%e8%a7%a3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;221-文件上传组件-fileuploadtsx&#34;&gt;&lt;span&gt;2.2.1 文件上传组件 (&lt;code&gt;FileUpload.tsx&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#221-%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e7%bb%84%e4%bb%b6-fileuploadtsx&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 处理医学影像上传，支持拖放、文件验证和缩略图预览。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心状态：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;isDragging&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setIsDragging&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;filesWithPreviews&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setFilesWithPreviews&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;FileWithPreview&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;[]&lt;/span&gt;&amp;gt;([]);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;validationError&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setValidationError&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;ValidationError&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;null&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;validateFile(file)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 验证文件格式和大小&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;验证规则：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;支持格式：image/jpeg, image/jpg, image/png&lt;/li&gt;&#xA;&lt;li&gt;最大大小：50MB&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; &lt;code&gt;ValidationError&amp;ensp;|&amp;ensp;null&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 前端验证减少无效请求，提升用户体验&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;createPreview(file)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 生成图像预览&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 使用FileReader读取文件，转换为Data URL&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; Promise&lt;!-- raw HTML omitted --&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用Promise：&lt;/strong&gt; FileReader是异步操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;handleFiles(newFiles)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 处理新上传的文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证所有文件&lt;/li&gt;&#xA;&lt;li&gt;为每个文件生成预览&lt;/li&gt;&#xA;&lt;li&gt;更新状态&lt;/li&gt;&#xA;&lt;li&gt;调用onChange回调通知父组件&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用async/await：&lt;/strong&gt; 需要等待所有预览生成完成&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;拖放事件处理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;handleDragEnter&lt;/code&gt;: 进入拖放区域&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;handleDragLeave&lt;/code&gt;: 离开拖放区域&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;handleDragOver&lt;/code&gt;: 在拖放区域上方&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;handleDrop&lt;/code&gt;: 释放文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要这些事件：&lt;/strong&gt; 实现拖放上传，提供视觉反馈&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;UI特性：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;拖放区域高亮显示&lt;/li&gt;&#xA;&lt;li&gt;缩略图网格布局&lt;/li&gt;&#xA;&lt;li&gt;文件信息显示（名称、大小）&lt;/li&gt;&#xA;&lt;li&gt;移除按钮&lt;/li&gt;&#xA;&lt;li&gt;错误提示&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用memo：&lt;/strong&gt; 避免不必要的重新渲染，提升性能&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;222-多图结果展示组件-multipleresultsviewtsx&#34;&gt;&lt;span&gt;2.2.2 多图结果展示组件 (&lt;code&gt;MultipleResultsView.tsx&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#222-%e5%a4%9a%e5%9b%be%e7%bb%93%e6%9e%9c%e5%b1%95%e7%a4%ba%e7%bb%84%e4%bb%b6-multipleresultsviewtsx&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 展示多张图像的分组分析结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心状态：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;expandedCategories&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setExpandedCategories&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Set&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&amp;gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;Set&lt;/span&gt;());&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;expandedImages&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setExpandedImages&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Set&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&amp;gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;Set&lt;/span&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;toggleCategory(category)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 展开/折叠类别&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 使用Set管理展开状态&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用Set：&lt;/strong&gt; 高效的查找和添加/删除操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;toggleImageDetails(imagePath)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 展开/折叠图像详情&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 类似toggleCategory&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 避免一次显示过多信息，保持界面整洁&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;renderConfidenceBadge(confidence)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 渲染置信度徽章&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;样式规则：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;confidence &amp;gt;= 60: 绿色（正常）&lt;/li&gt;&#xA;&lt;li&gt;confidence &amp;lt; 60: 黄色（警告）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么这么设计：&lt;/strong&gt; 视觉化置信度，快速识别低置信度结果&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;renderImageCard(image,&amp;ensp;categoryName)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 渲染单个图像卡片&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;内容：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;图像预览&lt;/li&gt;&#xA;&lt;li&gt;图像类型&lt;/li&gt;&#xA;&lt;li&gt;置信度徽章&lt;/li&gt;&#xA;&lt;li&gt;异常标记（如果有）&lt;/li&gt;&#xA;&lt;li&gt;展开按钮&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;展开后显示：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;关键特征&lt;/li&gt;&#xA;&lt;li&gt;分析推理&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用卡片：&lt;/strong&gt; 清晰的视觉分隔，易于浏览&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;UI布局：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;类别卡片（可折叠）&#xA;&lt;ul&gt;&#xA;&lt;li&gt;类别标题 + 图像数量徽章&lt;/li&gt;&#xA;&lt;li&gt;解释说明区域&#xA;&lt;ul&gt;&#xA;&lt;li&gt;共同特征（列表）&lt;/li&gt;&#xA;&lt;li&gt;分类原因&lt;/li&gt;&#xA;&lt;li&gt;相似性分析&lt;/li&gt;&#xA;&lt;li&gt;差异性分析&lt;/li&gt;&#xA;&lt;li&gt;总结&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;图像网格（响应式布局）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用memo：&lt;/strong&gt; 结果数据通常不变，避免重复渲染&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;223-统计图表组件-statisticscharttsx&#34;&gt;&lt;span&gt;2.2.3 统计图表组件 (&lt;code&gt;StatisticsChart.tsx&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#223-%e7%bb%9f%e8%ae%a1%e5%9b%be%e8%a1%a8%e7%bb%84%e4%bb%b6-statisticscharttsx&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 可视化类别分布统计。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心依赖：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Chart.js: 图表库&lt;/li&gt;&#xA;&lt;li&gt;react-chartjs-2: React封装&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;useMemo(()&amp;ensp;=&amp;gt;&amp;ensp;chartData,&amp;ensp;[...])&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 计算图表数据&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;chartData&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useMemo&lt;/span&gt;(()&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;Object.&lt;span style=&#34;color:#a6e22e&#34;&gt;keys&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;statistics&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;category_distribution&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;counts&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cat&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;statistics&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;category_distribution&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;cat&lt;/span&gt;]);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;colors&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[...];&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;Fluent&amp;ensp;UI颜色&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;labels&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;categories&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;datasets&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;[{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;label&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;图像数量&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;counts&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;backgroundColor&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;colors&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;borderColor&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;colors&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;borderWidth&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;2&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;},&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;statistics&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;category_distribution&lt;/span&gt;]);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用useMemo：&lt;/strong&gt; 避免每次渲染都重新计算，提升性能&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;图表配置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;饼图配置 (pieOptions):&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;响应式布局&lt;/li&gt;&#xA;&lt;li&gt;图例位置：底部&lt;/li&gt;&#xA;&lt;li&gt;工具提示：显示数量和百分比&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;柱状图配置 (barOptions):&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Y轴从0开始&lt;/li&gt;&#xA;&lt;li&gt;步长为1&lt;/li&gt;&#xA;&lt;li&gt;隐藏X轴网格线&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;统计卡片&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;总图像数&lt;/li&gt;&#xA;&lt;li&gt;类别数量&lt;/li&gt;&#xA;&lt;li&gt;最多类别及数量&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么提供两种图表：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;饼图：直观显示比例&lt;/li&gt;&#xA;&lt;li&gt;柱状图：便于比较数量&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;颜色选择：&lt;/strong&gt; 使用Fluent UI颜色令牌，保持设计一致性&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;224-导出按钮组件-exportbuttontsx&#34;&gt;&lt;span&gt;2.2.4 导出按钮组件 (&lt;code&gt;ExportButton.tsx&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#224-%e5%af%bc%e5%87%ba%e6%8c%89%e9%92%ae%e7%bb%84%e4%bb%b6-exportbuttontsx&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 导出分析结果为JSON文件。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心状态：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;exportStatus&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setExportStatus&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idle&amp;#39;&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;success&amp;#39;&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;error&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;idle&amp;#39;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;errorMessage&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setErrorMessage&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;handleExport()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 生成并下载JSON文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;将结果转换为JSON字符串（格式化，缩进2空格）&lt;/li&gt;&#xA;&lt;li&gt;创建Blob对象（类型：application/json）&lt;/li&gt;&#xA;&lt;li&gt;创建下载URL（URL.createObjectURL）&lt;/li&gt;&#xA;&lt;li&gt;创建临时&lt;!-- raw HTML omitted --&gt;标签&lt;/li&gt;&#xA;&lt;li&gt;设置download属性（文件名包含时间戳）&lt;/li&gt;&#xA;&lt;li&gt;触发点击下载&lt;/li&gt;&#xA;&lt;li&gt;清理DOM和URL&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;文件名格式：&lt;/strong&gt; &lt;code&gt;analysis-results-2024-12-03T10-30-45.json&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用Blob：&lt;/strong&gt; 在浏览器中生成文件，无需服务器参与&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;状态管理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;导出成功：显示成功消息3秒&lt;/li&gt;&#xA;&lt;li&gt;导出失败：显示错误消息5秒&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么自动隐藏：&lt;/strong&gt; 避免界面混乱&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;UI特性：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;成功状态：显示对勾图标，按钮禁用&lt;/li&gt;&#xA;&lt;li&gt;错误状态：显示错误消息&lt;/li&gt;&#xA;&lt;li&gt;正常状态：显示下载图标&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用memo：&lt;/strong&gt; 结果数据不变，避免重复渲染&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;225-主分析页面-analysispagetsx&#34;&gt;&lt;span&gt;2.2.5 主分析页面 (&lt;code&gt;AnalysisPage.tsx&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#225-%e4%b8%bb%e5%88%86%e6%9e%90%e9%a1%b5%e9%9d%a2-analysispagetsx&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 整合所有组件，提供完整的分析流程。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心状态：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setFiles&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;[]&lt;/span&gt;&amp;gt;([]);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;selectedCategories&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setSelectedCategories&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;[]&lt;/span&gt;&amp;gt;([]);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;customCategory&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setCustomCategory&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;loading&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setLoading&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setResult&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;AnalysisResult&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;null&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setError&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;null&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;successMessage&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setSuccessMessage&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;string&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;null&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;handleCategoryChange(category,&amp;ensp;checked)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 处理类别复选框变化&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; 添加或移除类别&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;handleAddCustomCategory()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 添加自定义类别&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;验证：&lt;/strong&gt; 去除空格，检查重复&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 支持用户自定义分类&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;handleAnalyze()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 执行分析&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;流程：&lt;/strong&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证至少有一个文件&lt;/li&gt;&#xA;&lt;li&gt;设置loading状态&lt;/li&gt;&#xA;&lt;li&gt;调用&lt;code&gt;analyzeImages()&lt;/code&gt; API&lt;/li&gt;&#xA;&lt;li&gt;根据结果类型设置成功消息&lt;/li&gt;&#xA;&lt;li&gt;错误处理&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用async/await：&lt;/strong&gt; API调用是异步操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;renderSingleResult(singleResult)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 渲染单张图像结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;布局：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;左侧：图像预览（300px）&lt;/li&gt;&#xA;&lt;li&gt;右侧：分析详情&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;内容：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;图像类型&lt;/li&gt;&#xA;&lt;li&gt;诊断类别&lt;/li&gt;&#xA;&lt;li&gt;置信度徽章&lt;/li&gt;&#xA;&lt;li&gt;异常标记&lt;/li&gt;&#xA;&lt;li&gt;关键特征&lt;/li&gt;&#xA;&lt;li&gt;分析推理&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;renderMultipleResults(multipleResult)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 渲染多张图像结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;组件：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;MultipleResultsView&lt;/li&gt;&#xA;&lt;li&gt;StatisticsChart&lt;/li&gt;&#xA;&lt;li&gt;ExportButton&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;页面布局：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;标题和描述&lt;/li&gt;&#xA;&lt;li&gt;错误/成功消息&lt;/li&gt;&#xA;&lt;li&gt;文件上传区域&lt;/li&gt;&#xA;&lt;li&gt;类别选择区域&#xA;&lt;ul&gt;&#xA;&lt;li&gt;预定义类别（复选框）&lt;/li&gt;&#xA;&lt;li&gt;自定义类别（输入框）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;分析按钮&lt;/li&gt;&#xA;&lt;li&gt;加载状态&lt;/li&gt;&#xA;&lt;li&gt;结果展示&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么这样设计：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;步骤清晰：1.上传 → 2.选择类别 → 3.分析&lt;/li&gt;&#xA;&lt;li&gt;即时反馈：错误/成功消息&lt;/li&gt;&#xA;&lt;li&gt;响应式布局：适配不同屏幕&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;23-api服务层-apits&#34;&gt;&lt;span&gt;2.3 API服务层 (&lt;code&gt;api.ts&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#23-api%e6%9c%8d%e5%8a%a1%e5%b1%82-apits&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;功能：&lt;/strong&gt; 封装与Django后端的HTTP通信。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;Axios配置：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;api&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;axios&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;create&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;baseURL&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/api&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;headers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;multipart/form-data&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;核心函数：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;formatApiError(error)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 格式化API错误&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;处理情况：&lt;/strong&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;服务器响应错误：提取错误消息&lt;/li&gt;&#xA;&lt;li&gt;网络错误：显示连接失败&lt;/li&gt;&#xA;&lt;li&gt;未知错误：显示通用错误&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回格式：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;success&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ERROR_CODE&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;用户友好的错误消息&amp;#39;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么需要：&lt;/strong&gt; 统一错误格式，提供友好的错误提示&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;analyzeImages(files,&amp;ensp;categories)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 调用分析API&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;formData&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;FormData&lt;/span&gt;();&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;forEach&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;formData&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;images&amp;#39;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;file&lt;/span&gt;));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;(&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;)&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;formData&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;categories&amp;#39;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;stringify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;));&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;api&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;post&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;AnalysisResult&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/analyze/&amp;#39;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;formData&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用FormData：&lt;/strong&gt; 支持文件上传&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么JSON.stringify categories：&lt;/strong&gt; 后端需要JSON字符串&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;getCategories()&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 获取预定义类别&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; GET请求到&lt;code&gt;/api/categories/&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;返回值：&lt;/strong&gt; string[]&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;exportResults(results)&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;功能：&lt;/strong&gt; 导出结果（备用方案）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;注意：&lt;/strong&gt; 当前前端直接生成JSON，此函数备用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;错误处理策略：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;捕获所有异常&lt;/li&gt;&#xA;&lt;li&gt;格式化为统一的ApiError&lt;/li&gt;&#xA;&lt;li&gt;抛出给调用者处理&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用axios：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;自动JSON转换&lt;/li&gt;&#xA;&lt;li&gt;拦截器支持&lt;/li&gt;&#xA;&lt;li&gt;请求/响应转换&lt;/li&gt;&#xA;&lt;li&gt;超时控制&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;24-typescript类型定义-typesindexts&#34;&gt;&lt;span&gt;2.4 TypeScript类型定义 (&lt;code&gt;types/index.ts&lt;/code&gt;)&lt;/span&gt;&#xA;  &lt;a href=&#34;#24-typescript%e7%b1%bb%e5%9e%8b%e5%ae%9a%e4%b9%89-typesindexts&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;核心类型：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;ClassificationResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;ClassificationResult&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;image_path&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;image_type&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;category&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;confidence&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;number&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;features&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;reasoning&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;abnormal?&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SingleAnalysisResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;SingleAnalysisResult&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;success&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;single&amp;#39;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;ClassificationResult&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_response?&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;MultipleAnalysisResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;MultipleAnalysisResult&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;success&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;boolean&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;multiple&amp;#39;&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;total_images&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;number&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;grouped_by_category&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;category&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;ClassificationResult&lt;/span&gt;[];&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;explanations&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;category&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;CategoryExplanation&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;statistics&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;total_categories&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;number&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;category_distribution&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;category&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;number&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;&lt;code&gt;AnalysisResult&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;AnalysisResult&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;SingleAnalysisResult&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;MultipleAnalysisResult&lt;/span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用联合类型：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;类型安全：编译时检查&lt;/li&gt;&#xA;&lt;li&gt;智能提示：IDE自动补全&lt;/li&gt;&#xA;&lt;li&gt;类型守卫：运行时类型判断&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;25-样式设计&#34;&gt;&lt;span&gt;2.5 样式设计&lt;/span&gt;&#xA;  &lt;a href=&#34;#25-%e6%a0%b7%e5%bc%8f%e8%ae%be%e8%ae%a1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;设计系统：&lt;/strong&gt; Fluent UI v9&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心特性：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;makeStyles API&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useStyles&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;makeStyles&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;container&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;minHeight&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;100vh&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;backgroundColor&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;tokens.colorNeutralBackground3&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;优势：&lt;/strong&gt; 类型安全、性能优化、主题支持&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;设计令牌 (Design Tokens)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;颜色：&lt;code&gt;tokens.colorBrandForeground1&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;字体：&lt;code&gt;tokens.fontSizeBase400&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;间距：&lt;code&gt;tokens.spacingHorizontalM&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;圆角：&lt;code&gt;tokens.borderRadiusMedium&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么使用令牌：&lt;/strong&gt; 保持设计一致性，支持主题切换&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;响应式设计&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;@media&amp;ensp;(max-width:&amp;ensp;768px)&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;gridTemplateColumns&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1fr&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;断点：768px（平板）&lt;/li&gt;&#xA;&lt;li&gt;布局调整：网格变单列&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;动画效果&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;fade-in：淡入&lt;/li&gt;&#xA;&lt;li&gt;slide-in：滑入&lt;/li&gt;&#xA;&lt;li&gt;scale-in：缩放&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;实现：&lt;/strong&gt; CSS动画 + 类名&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;颜色语义：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;绿色：正常/成功&lt;/li&gt;&#xA;&lt;li&gt;黄色：警告/低置信度&lt;/li&gt;&#xA;&lt;li&gt;红色：异常/错误&lt;/li&gt;&#xA;&lt;li&gt;蓝色：品牌色/主要操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;26-前端调用关系图&#34;&gt;&lt;span&gt;2.6 前端调用关系图&lt;/span&gt;&#xA;  &lt;a href=&#34;#26-%e5%89%8d%e7%ab%af%e8%b0%83%e7%94%a8%e5%85%b3%e7%b3%bb%e5%9b%be&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;用户操作&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;AnalysisPage&amp;ensp;(主页面)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;FileUpload&amp;ensp;(文件上传)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;api.analyzeImages()&amp;ensp;(API调用)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;Django后端&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;返回结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;AnalysisPage&amp;ensp;(状态更新)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;MultipleResultsView&amp;ensp;/&amp;ensp;StatisticsChart&amp;ensp;(结果展示)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;ExportButton&amp;ensp;(导出功能)&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;数据流：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;用户选择文件 → FileUpload组件&lt;/li&gt;&#xA;&lt;li&gt;FileUpload通知父组件 → AnalysisPage更新files状态&lt;/li&gt;&#xA;&lt;li&gt;用户点击分析 → handleAnalyze()&lt;/li&gt;&#xA;&lt;li&gt;调用API → api.analyzeImages()&lt;/li&gt;&#xA;&lt;li&gt;接收结果 → 更新result状态&lt;/li&gt;&#xA;&lt;li&gt;渲染结果 → MultipleResultsView/StatisticsChart&lt;/li&gt;&#xA;&lt;li&gt;用户导出 → ExportButton生成JSON&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;三系统集成与部署&#34;&gt;&lt;span&gt;三、系统集成与部署&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%89%e7%b3%bb%e7%bb%9f%e9%9b%86%e6%88%90%e4%b8%8e%e9%83%a8%e7%bd%b2&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;31-开发环境启动&#34;&gt;&lt;span&gt;3.1 开发环境启动&lt;/span&gt;&#xA;  &lt;a href=&#34;#31-%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e5%90%af%e5%8a%a8&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;后端启动：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;方式1：使用批处理脚本&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;run.bat&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;方式2：手动启动&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;python&amp;ensp;-m&amp;ensp;medical_imaging.django_app.manage&amp;ensp;runserver&amp;ensp;0.0.0.0:8000&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;前端启动：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd&amp;ensp;frontend&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm&amp;ensp;install&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm&amp;ensp;run&amp;ensp;dev&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;访问&amp;ensp;http://localhost:3000&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;为什么分开启动：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前后端独立开发&lt;/li&gt;&#xA;&lt;li&gt;支持热重载&lt;/li&gt;&#xA;&lt;li&gt;便于调试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;32-api代理配置&#34;&gt;&lt;span&gt;3.2 API代理配置&lt;/span&gt;&#xA;  &lt;a href=&#34;#32-api%e4%bb%a3%e7%90%86%e9%85%8d%e7%bd%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Vite配置 (&lt;code&gt;vite.config.ts&lt;/code&gt;)：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;defineConfig&lt;/span&gt;({&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;server&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;port&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;3000&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;proxy&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/api&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;target&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:8000&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;changeOrigin&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/temp&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;target&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://localhost:8000&amp;#39;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;changeOrigin&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;});&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;作用：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端请求&lt;code&gt;/api/*&lt;/code&gt;自动转发到后端&lt;/li&gt;&#xA;&lt;li&gt;解决跨域问题&lt;/li&gt;&#xA;&lt;li&gt;简化前端配置&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;33-生产环境部署&#34;&gt;&lt;span&gt;3.3 生产环境部署&lt;/span&gt;&#xA;  &lt;a href=&#34;#33-%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83%e9%83%a8%e7%bd%b2&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;后端部署：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;修改&lt;code&gt;settings.py&lt;/code&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DEBUG&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ALLOWED_HOSTS&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;your-domain.com&amp;#39;&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SECRET_KEY&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;environ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;SECRET_KEY&amp;#39;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;收集静态文件：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;python&amp;ensp;-m&amp;ensp;medical_imaging.django_app.manage&amp;ensp;collectstatic&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;使用WSGI服务器（如Gunicorn）：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gunicorn&amp;ensp;medical_imaging.django_app.config.wsgi:application&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;前端部署：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;构建生产版本：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd&amp;ensp;frontend&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm&amp;ensp;run&amp;ensp;build&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;部署dist目录到Web服务器（Nginx/Apache）&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;配置反向代理：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-nginx&#34; data-lang=&#34;nginx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;location&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;/api/&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;proxy_pass&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;http://backend:8000/api/&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么这样部署：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端静态文件由Nginx提供，性能高&lt;/li&gt;&#xA;&lt;li&gt;后端API由Gunicorn处理，支持并发&lt;/li&gt;&#xA;&lt;li&gt;反向代理统一入口，简化配置&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;34-环境变量配置&#34;&gt;&lt;span&gt;3.4 环境变量配置&lt;/span&gt;&#xA;  &lt;a href=&#34;#34-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e9%85%8d%e7%bd%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;后端环境变量：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;VLM_API_KEY&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;your-api-key&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;VLM_BASE_URL&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;https://dashscope.aliyuncs.com/compatible-mode/v1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;VLM_MODEL_NAME&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;qwen3-vl-plus&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SECRET_KEY&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;your-secret-key&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;为什么使用环境变量：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;安全：敏感信息不提交到代码库&lt;/li&gt;&#xA;&lt;li&gt;灵活：不同环境使用不同配置&lt;/li&gt;&#xA;&lt;li&gt;标准：遵循12-factor应用原则&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;四核心功能实现原理&#34;&gt;&lt;span&gt;四、核心功能实现原理&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%9b%9b%e6%a0%b8%e5%bf%83%e5%8a%9f%e8%83%bd%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;41-图像分类原理&#34;&gt;&lt;span&gt;4.1 图像分类原理&lt;/span&gt;&#xA;  &lt;a href=&#34;#41-%e5%9b%be%e5%83%8f%e5%88%86%e7%b1%bb%e5%8e%9f%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;流程：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;图像预处理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;读取图像文件&lt;/li&gt;&#xA;&lt;li&gt;编码为Base64字符串&lt;/li&gt;&#xA;&lt;li&gt;嵌入到API请求中&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;提示词工程&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;prompt&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;请对这张医疗影像进行专业分类。可能的类别包括：&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&lt;/span&gt;categories_str&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;。&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;请分析图像并回答以下问题：&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;1.&amp;ensp;图像类型（X光片、CT扫描、MRI等）&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;2.&amp;ensp;主要诊断类别&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;3.&amp;ensp;置信度评估（0-100%）&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;4.&amp;ensp;关键特征描述&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;请以JSON格式返回结果...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;关键点：&lt;/strong&gt; 明确要求JSON格式，指定字段&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;为什么有效：&lt;/strong&gt; VLM理解结构化输出要求&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;VLM推理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;模型分析图像内容&lt;/li&gt;&#xA;&lt;li&gt;识别医学特征&lt;/li&gt;&#xA;&lt;li&gt;匹配诊断类别&lt;/li&gt;&#xA;&lt;li&gt;生成置信度&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;结果解析&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提取JSON对象&lt;/li&gt;&#xA;&lt;li&gt;验证字段完整性&lt;/li&gt;&#xA;&lt;li&gt;返回结构化结果&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用VLM而不是传统CNN：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;VLM理解语义，可以解释推理过程&lt;/li&gt;&#xA;&lt;li&gt;支持开放式分类，不限于预定义类别&lt;/li&gt;&#xA;&lt;li&gt;可以处理多模态信息（图像+文本）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;42-批量分析与分组原理&#34;&gt;&lt;span&gt;4.2 批量分析与分组原理&lt;/span&gt;&#xA;  &lt;a href=&#34;#42-%e6%89%b9%e9%87%8f%e5%88%86%e6%9e%90%e4%b8%8e%e5%88%86%e7%bb%84%e5%8e%9f%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;流程：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;并行分类&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;classification_results&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;classify_image(image_path,&amp;ensp;categories)&amp;ensp;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;&amp;ensp;image_path&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;image_paths&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;注意：&lt;/strong&gt; 当前是串行，可优化为并行&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;结果分组&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;grouped_images&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;{}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;classification_results:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;category&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;][&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;category&amp;#34;&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;category&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;not&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;grouped_images:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;grouped_images[category]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;grouped_images[category]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(result)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据结构：&lt;/strong&gt; 字典，键为类别，值为结果列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;生成解释&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提取每个类别的所有图像特征&lt;/li&gt;&#xA;&lt;li&gt;构建包含所有信息的提示词&lt;/li&gt;&#xA;&lt;li&gt;调用VLM生成解释&lt;/li&gt;&#xA;&lt;li&gt;解释内容：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;共同特征&lt;/li&gt;&#xA;&lt;li&gt;分类原因&lt;/li&gt;&#xA;&lt;li&gt;相似性&lt;/li&gt;&#xA;&lt;li&gt;差异性&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么需要解释：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;帮助医生理解AI决策&lt;/li&gt;&#xA;&lt;li&gt;提高可信度&lt;/li&gt;&#xA;&lt;li&gt;发现分类规律&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;43-目标检测原理&#34;&gt;&lt;span&gt;4.3 目标检测原理&lt;/span&gt;&#xA;  &lt;a href=&#34;#43-%e7%9b%ae%e6%a0%87%e6%a3%80%e6%b5%8b%e5%8e%9f%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;流程：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;上下文增强&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;如果有分类结果，提取诊断类别和特征&lt;/li&gt;&#xA;&lt;li&gt;构建上下文提示：&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;classification_context&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;重要提示：该图像已被分类为&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&lt;/span&gt;category&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;类别（置信度:&amp;ensp;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&lt;/span&gt;confidence&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;%）。&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;请特别注意检测与该分类相关的异常区域...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;边界框检测&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提示词要求返回归一化坐标&lt;/li&gt;&#xA;&lt;li&gt;VLM识别异常区域&lt;/li&gt;&#xA;&lt;li&gt;生成边界框[x_min, y_min, x_max, y_max]&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;一致性检查&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;比较检测结果与分类结果&lt;/li&gt;&#xA;&lt;li&gt;如果不一致，提示重新检查&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用归一化坐标：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;与图像尺寸无关&lt;/li&gt;&#xA;&lt;li&gt;便于前端渲染&lt;/li&gt;&#xA;&lt;li&gt;标准化格式&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;局限性：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;VLM的目标检测精度不如专用模型（如YOLO）&lt;/li&gt;&#xA;&lt;li&gt;适合辅助诊断，不能替代专业检测&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;44-临时文件管理原理&#34;&gt;&lt;span&gt;4.4 临时文件管理原理&lt;/span&gt;&#xA;  &lt;a href=&#34;#44-%e4%b8%b4%e6%97%b6%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86%e5%8e%9f%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;生命周期：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;上传阶段&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;生成UUID文件名&lt;/li&gt;&#xA;&lt;li&gt;保存到temp目录&lt;/li&gt;&#xA;&lt;li&gt;返回路径给分析器&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;使用阶段&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;分析器读取文件&lt;/li&gt;&#xA;&lt;li&gt;前端显示图像&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;清理阶段&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;定时任务检查文件年龄&lt;/li&gt;&#xA;&lt;li&gt;删除超过1小时的文件&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么不立即删除：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端需要显示图像&lt;/li&gt;&#xA;&lt;li&gt;用户可能需要重新查看结果&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么使用UUID：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;避免文件名冲突&lt;/li&gt;&#xA;&lt;li&gt;安全：不暴露原始文件名&lt;/li&gt;&#xA;&lt;li&gt;唯一性保证&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;清理策略：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;cleanup_old_files&lt;/span&gt;(self,&amp;ensp;max_age_seconds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3600&lt;/span&gt;):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;current_time&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;time&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;time()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;&amp;ensp;file_path&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt;&amp;ensp;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;temp_dir&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;iterdir():&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;file_age&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;current_time&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&amp;ensp;file_path&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;stat()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;st_mtime&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;file_age&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&amp;ensp;max_age_seconds:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;file_path&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unlink()&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;五性能优化策略&#34;&gt;&lt;span&gt;五、性能优化策略&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%ba%94%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%e7%ad%96%e7%95%a5&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;51-后端优化&#34;&gt;&lt;span&gt;5.1 后端优化&lt;/span&gt;&#xA;  &lt;a href=&#34;#51-%e5%90%8e%e7%ab%af%e4%bc%98%e5%8c%96&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;HTTP会话复用&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用&lt;code&gt;requests.Session()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;避免重复建立TCP连接&lt;/li&gt;&#xA;&lt;li&gt;提升API调用速度&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;异步处理（未实现，可优化）&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用&lt;code&gt;asyncio&lt;/code&gt;并行分类多张图像&lt;/li&gt;&#xA;&lt;li&gt;减少总处理时间&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;缓存机制（未实现，可优化）&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;缓存相同图像的分析结果&lt;/li&gt;&#xA;&lt;li&gt;使用Redis存储&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;图像压缩&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端限制上传大小&lt;/li&gt;&#xA;&lt;li&gt;可选：服务器端压缩&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;52-前端优化&#34;&gt;&lt;span&gt;5.2 前端优化&lt;/span&gt;&#xA;  &lt;a href=&#34;#52-%e5%89%8d%e7%ab%af%e4%bc%98%e5%8c%96&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;组件懒加载&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用React.lazy()&lt;/li&gt;&#xA;&lt;li&gt;减少初始加载时间&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;虚拟滚动（未实现，可优化）&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;大量图像时使用虚拟列表&lt;/li&gt;&#xA;&lt;li&gt;只渲染可见区域&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;图像懒加载&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用&lt;code&gt;loading=&amp;quot;lazy&amp;quot;&lt;/code&gt;属性&lt;/li&gt;&#xA;&lt;li&gt;延迟加载非可见图像&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Memo优化&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用&lt;code&gt;React.memo()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;避免不必要的重新渲染&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;useMemo/useCallback&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;缓存计算结果&lt;/li&gt;&#xA;&lt;li&gt;缓存回调函数&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;53-网络优化&#34;&gt;&lt;span&gt;5.3 网络优化&lt;/span&gt;&#xA;  &lt;a href=&#34;#53-%e7%bd%91%e7%bb%9c%e4%bc%98%e5%8c%96&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;API代理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;开发环境使用Vite代理&lt;/li&gt;&#xA;&lt;li&gt;避免跨域预检请求&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;压缩传输&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;启用gzip压缩&lt;/li&gt;&#xA;&lt;li&gt;减少传输数据量&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;CDN加速（生产环境）&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;静态资源使用CDN&lt;/li&gt;&#xA;&lt;li&gt;加速全球访问&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;六错误处理机制&#34;&gt;&lt;span&gt;六、错误处理机制&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%85%ad%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;61-后端错误处理&#34;&gt;&lt;span&gt;6.1 后端错误处理&lt;/span&gt;&#xA;  &lt;a href=&#34;#61-%e5%90%8e%e7%ab%af%e9%94%99%e8%af%af%e5%a4%84%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;分层错误处理：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;核心层 (analyzer.py)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result_text&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(messages)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result_json&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;extract_json_from_text(result_text)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;:&amp;ensp;result_json}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;Exception&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;e:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&amp;ensp;str(e)}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;捕获所有异常&lt;/li&gt;&#xA;&lt;li&gt;返回统一格式&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;服务层 (services.py)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;analyzer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;classify_image(image_path,&amp;ensp;categories)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;not&lt;/span&gt;&amp;ensp;result&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ANALYSIS_ERROR&amp;#34;&lt;/span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;FileNotFoundError&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;False&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FILE_NOT_FOUND&amp;#34;&lt;/span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;细化错误类型&lt;/li&gt;&#xA;&lt;li&gt;添加错误码&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;视图层 (views.py)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;analysis_service&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;analyze_single_image(&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;JsonResponse(result)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;except&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;Exception&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;e:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;logger&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;error(&lt;span style=&#34;color:#e6db74&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Error:&amp;ensp;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&lt;/span&gt;str(e)&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;,&amp;ensp;exc_info&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;JsonResponse({&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;INTERNAL_ERROR&amp;#34;&lt;/span&gt;},&amp;ensp;status&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;记录日志&lt;/li&gt;&#xA;&lt;li&gt;返回HTTP状态码&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;错误码设计：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;NO_FILES&lt;/code&gt;: 未上传文件&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;INVALID_FILE_FORMAT&lt;/code&gt;: 文件格式不支持&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;INVALID_CATEGORIES&lt;/code&gt;: 类别格式无效&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;FILE_NOT_FOUND&lt;/code&gt;: 文件不存在&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;ANALYSIS_ERROR&lt;/code&gt;: 分析失败&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;INTERNAL_ERROR&lt;/code&gt;: 服务器内部错误&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;62-前端错误处理&#34;&gt;&lt;span&gt;6.2 前端错误处理&lt;/span&gt;&#xA;  &lt;a href=&#34;#62-%e5%89%8d%e7%ab%af%e9%94%99%e8%af%af%e5%a4%84%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;错误边界 (ErrorBoundary.tsx)&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;ErrorBoundary&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;extends&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;React&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Component&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;componentDidCatch&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;errorInfo&lt;/span&gt;)&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Error&amp;ensp;caught&amp;ensp;by&amp;ensp;boundary:&amp;#39;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;errorInfo&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;render()&amp;ensp;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;&amp;ensp;(&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;state&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;hasError&lt;/span&gt;)&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;ErrorFallback&lt;/span&gt;&amp;ensp;/&amp;gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;props&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;children&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;捕获组件树中的错误&lt;/li&gt;&#xA;&lt;li&gt;显示友好的错误页面&lt;/li&gt;&#xA;&lt;li&gt;防止整个应用崩溃&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;API错误处理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;analyzeImages&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setResult&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;&amp;ensp;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;apiError&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;ApiError&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setError&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;apiError&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;分析失败，请稍后重试&amp;#39;&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&#xA;&lt;li&gt;捕获API异常&lt;/li&gt;&#xA;&lt;li&gt;显示用户友好的错误消息&lt;/li&gt;&#xA;&lt;li&gt;保持应用可用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;表单验证&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端验证文件格式和大小&lt;/li&gt;&#xA;&lt;li&gt;减少无效请求&lt;/li&gt;&#xA;&lt;li&gt;即时反馈&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;七安全性考虑&#34;&gt;&lt;span&gt;七、安全性考虑&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%83%e5%ae%89%e5%85%a8%e6%80%a7%e8%80%83%e8%99%91&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;71-文件上传安全&#34;&gt;&lt;span&gt;7.1 文件上传安全&lt;/span&gt;&#xA;  &lt;a href=&#34;#71-%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0%e5%ae%89%e5%85%a8&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;文件类型验证&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端：检查MIME类型&lt;/li&gt;&#xA;&lt;li&gt;后端：验证文件扩展名&lt;/li&gt;&#xA;&lt;li&gt;双重验证防止绕过&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;文件大小限制&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;前端：50MB&lt;/li&gt;&#xA;&lt;li&gt;后端：Django配置50MB&lt;/li&gt;&#xA;&lt;li&gt;防止DoS攻击&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;文件名安全&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用UUID重命名&lt;/li&gt;&#xA;&lt;li&gt;避免路径遍历攻击&lt;/li&gt;&#xA;&lt;li&gt;不暴露原始文件名&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;临时文件隔离&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;存储在专用temp目录&lt;/li&gt;&#xA;&lt;li&gt;定期清理&lt;/li&gt;&#xA;&lt;li&gt;不可直接访问&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;72-api安全&#34;&gt;&lt;span&gt;7.2 API安全&lt;/span&gt;&#xA;  &lt;a href=&#34;#72-api%e5%ae%89%e5%85%a8&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;CORS配置&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;开发环境：允许所有来源&lt;/li&gt;&#xA;&lt;li&gt;生产环境：限制特定域名&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;CSRF保护&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;当前禁用（API-only应用）&lt;/li&gt;&#xA;&lt;li&gt;如需Web表单，启用CSRF&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;输入验证&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;验证categories参数格式&lt;/li&gt;&#xA;&lt;li&gt;防止注入攻击&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;错误信息&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不暴露敏感信息&lt;/li&gt;&#xA;&lt;li&gt;记录详细日志供调试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;73-数据隐私&#34;&gt;&lt;span&gt;7.3 数据隐私&lt;/span&gt;&#xA;  &lt;a href=&#34;#73-%e6%95%b0%e6%8d%ae%e9%9a%90%e7%a7%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;临时存储&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;文件仅临时存储&lt;/li&gt;&#xA;&lt;li&gt;1小时后自动删除&lt;/li&gt;&#xA;&lt;li&gt;不持久化患者数据&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;API密钥保护&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用环境变量&lt;/li&gt;&#xA;&lt;li&gt;不提交到代码库&lt;/li&gt;&#xA;&lt;li&gt;定期轮换&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;传输加密&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;生产环境使用HTTPS&lt;/li&gt;&#xA;&lt;li&gt;保护数据传输安全&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;八测试策略&#34;&gt;&lt;span&gt;八、测试策略&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%85%ab%e6%b5%8b%e8%af%95%e7%ad%96%e7%95%a5&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;81-后端测试&#34;&gt;&lt;span&gt;8.1 后端测试&lt;/span&gt;&#xA;  &lt;a href=&#34;#81-%e5%90%8e%e7%ab%af%e6%b5%8b%e8%af%95&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;测试文件：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;tests/test_api_with_images.py&lt;/code&gt;: API端到端测试&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;tests/test_e2e.py&lt;/code&gt;: 完整流程测试&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;tests/test_image_path_fix.py&lt;/code&gt;: 路径处理测试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;测试覆盖：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;单元测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;工具函数测试&lt;/li&gt;&#xA;&lt;li&gt;类型验证测试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;集成测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;API调用测试&lt;/li&gt;&#xA;&lt;li&gt;文件上传测试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;端到端测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;完整分析流程&lt;/li&gt;&#xA;&lt;li&gt;多图像分组&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;运行测试：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytest&amp;ensp;tests/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;82-前端测试未实现建议&#34;&gt;&lt;span&gt;8.2 前端测试（未实现，建议）&lt;/span&gt;&#xA;  &lt;a href=&#34;#82-%e5%89%8d%e7%ab%af%e6%b5%8b%e8%af%95%e6%9c%aa%e5%ae%9e%e7%8e%b0%e5%bb%ba%e8%ae%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;建议测试框架：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Jest: 单元测试&lt;/li&gt;&#xA;&lt;li&gt;React Testing Library: 组件测试&lt;/li&gt;&#xA;&lt;li&gt;Cypress: E2E测试&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;测试用例：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;组件测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;FileUpload: 文件选择、拖放、验证&lt;/li&gt;&#xA;&lt;li&gt;MultipleResultsView: 展开/折叠、数据渲染&lt;/li&gt;&#xA;&lt;li&gt;StatisticsChart: 图表渲染、数据计算&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;集成测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;API调用&lt;/li&gt;&#xA;&lt;li&gt;状态管理&lt;/li&gt;&#xA;&lt;li&gt;错误处理&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;E2E测试&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;完整分析流程&lt;/li&gt;&#xA;&lt;li&gt;导出功能&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;九扩展性设计&#34;&gt;&lt;span&gt;九、扩展性设计&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b9%9d%e6%89%a9%e5%b1%95%e6%80%a7%e8%ae%be%e8%ae%a1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;91-支持新的vlm模型&#34;&gt;&lt;span&gt;9.1 支持新的VLM模型&lt;/span&gt;&#xA;  &lt;a href=&#34;#91-%e6%94%af%e6%8c%81%e6%96%b0%e7%9a%84vlm%e6%a8%a1%e5%9e%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;步骤：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;修改环境变量：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;VLM_MODEL_NAME&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;new-model-name&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;如果API格式不同，修改&lt;code&gt;VLMClient.call()&lt;/code&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;调整提示词以适应新模型&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;为什么容易扩展：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;VLMClient封装了API细节&lt;/li&gt;&#xA;&lt;li&gt;提示词集中管理&lt;/li&gt;&#xA;&lt;li&gt;配置外部化&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;92-添加新的分析功能&#34;&gt;&lt;span&gt;9.2 添加新的分析功能&lt;/span&gt;&#xA;  &lt;a href=&#34;#92-%e6%b7%bb%e5%8a%a0%e6%96%b0%e7%9a%84%e5%88%86%e6%9e%90%e5%8a%9f%e8%83%bd&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;示例：添加病灶分割&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;后端：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;segment_lesion&lt;/span&gt;(self,&amp;ensp;image_path):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;构建分割提示词&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;prompt&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;请对图像中的病灶进行分割...&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;调用VLM&amp;ensp;API&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;self&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(messages)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;&amp;ensp;result&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;前端：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;添加分割结果展示组件&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;SegmentationView&lt;/span&gt;({&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;&amp;ensp;})&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;渲染分割掩码&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;API：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;@csrf_exempt&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;segment_image&lt;/span&gt;(request):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;处理分割请求&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;pass&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;93-多语言支持&#34;&gt;&lt;span&gt;9.3 多语言支持&lt;/span&gt;&#xA;  &lt;a href=&#34;#93-%e5%a4%9a%e8%af%ad%e8%a8%80%e6%94%af%e6%8c%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;实现方案：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;使用i18n库（如react-i18next）&lt;/li&gt;&#xA;&lt;li&gt;提取所有文本到语言文件&lt;/li&gt;&#xA;&lt;li&gt;根据用户偏好切换语言&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;zh-CN.json&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;upload.title&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;上传图像&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;analyze.button&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;开始分析&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;en-US.json&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;upload.title&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Upload&amp;ensp;Images&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;analyze.button&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Start&amp;ensp;Analysis&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;94-数据库集成可选&#34;&gt;&lt;span&gt;9.4 数据库集成（可选）&lt;/span&gt;&#xA;  &lt;a href=&#34;#94-%e6%95%b0%e6%8d%ae%e5%ba%93%e9%9b%86%e6%88%90%e5%8f%af%e9%80%89&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;场景：&lt;/strong&gt; 需要保存分析历史&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;实现：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;启用Django数据库&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;创建模型：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;AnalysisRecord&lt;/span&gt;(models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Model):&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;created_at&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DateTimeField(auto_now_add&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;image_path&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;CharField(max_length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;JSONField()&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;保存分析结果：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;AnalysisRecord&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;objects&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;image_path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;image_path,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;result&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;查询历史记录&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;十常见问题与解决方案&#34;&gt;&lt;span&gt;十、常见问题与解决方案&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8d%81%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e4%b8%8e%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;101-api调用失败&#34;&gt;&lt;span&gt;10.1 API调用失败&lt;/span&gt;&#xA;  &lt;a href=&#34;#101-api%e8%b0%83%e7%94%a8%e5%a4%b1%e8%b4%a5&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; VLM API返回错误&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;可能原因：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;API密钥无效&lt;/li&gt;&#xA;&lt;li&gt;网络连接问题&lt;/li&gt;&#xA;&lt;li&gt;请求超时&lt;/li&gt;&#xA;&lt;li&gt;配额用尽&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;检查环境变量配置&lt;/li&gt;&#xA;&lt;li&gt;测试网络连接&lt;/li&gt;&#xA;&lt;li&gt;增加超时时间&lt;/li&gt;&#xA;&lt;li&gt;检查API配额&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;102-图像无法显示&#34;&gt;&lt;span&gt;10.2 图像无法显示&lt;/span&gt;&#xA;  &lt;a href=&#34;#102-%e5%9b%be%e5%83%8f%e6%97%a0%e6%b3%95%e6%98%be%e7%a4%ba&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; 前端无法加载图像&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;可能原因：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;路径转换错误&lt;/li&gt;&#xA;&lt;li&gt;CORS配置问题&lt;/li&gt;&#xA;&lt;li&gt;文件已被清理&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;检查&lt;code&gt;_get_relative_image_path()&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;配置Django静态文件服务&lt;/li&gt;&#xA;&lt;li&gt;延长临时文件生命周期&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;103-内存占用过高&#34;&gt;&lt;span&gt;10.3 内存占用过高&lt;/span&gt;&#xA;  &lt;a href=&#34;#103-%e5%86%85%e5%ad%98%e5%8d%a0%e7%94%a8%e8%bf%87%e9%ab%98&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; 处理大量图像时内存不足&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;可能原因：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;图像未释放&lt;/li&gt;&#xA;&lt;li&gt;缓存过多&lt;/li&gt;&#xA;&lt;li&gt;并发请求过多&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;及时关闭文件句柄&lt;/li&gt;&#xA;&lt;li&gt;限制并发数量&lt;/li&gt;&#xA;&lt;li&gt;使用流式处理&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;104-分析速度慢&#34;&gt;&lt;span&gt;10.4 分析速度慢&lt;/span&gt;&#xA;  &lt;a href=&#34;#104-%e5%88%86%e6%9e%90%e9%80%9f%e5%ba%a6%e6%85%a2&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt; 分析多张图像耗时长&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;可能原因：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;串行处理&lt;/li&gt;&#xA;&lt;li&gt;网络延迟&lt;/li&gt;&#xA;&lt;li&gt;VLM响应慢&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;解决方案：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;实现并行处理&lt;/li&gt;&#xA;&lt;li&gt;使用更快的网络&lt;/li&gt;&#xA;&lt;li&gt;优化提示词长度&lt;/li&gt;&#xA;&lt;li&gt;考虑本地模型&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;十一总结&#34;&gt;&lt;span&gt;十一、总结&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8d%81%e4%b8%80%e6%80%bb%e7%bb%93&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;111-系统优势&#34;&gt;&lt;span&gt;11.1 系统优势&lt;/span&gt;&#xA;  &lt;a href=&#34;#111-%e7%b3%bb%e7%bb%9f%e4%bc%98%e5%8a%bf&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;智能化&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;基于先进的VLM模型&lt;/li&gt;&#xA;&lt;li&gt;支持开放式分类&lt;/li&gt;&#xA;&lt;li&gt;提供推理解释&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;易用性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;友好的Web界面&lt;/li&gt;&#xA;&lt;li&gt;拖放上传&lt;/li&gt;&#xA;&lt;li&gt;即时反馈&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;灵活性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;支持单张/多张分析&lt;/li&gt;&#xA;&lt;li&gt;自定义分类类别&lt;/li&gt;&#xA;&lt;li&gt;多种导出格式&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;可扩展性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;模块化设计&lt;/li&gt;&#xA;&lt;li&gt;配置外部化&lt;/li&gt;&#xA;&lt;li&gt;易于添加新功能&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;112-技术亮点&#34;&gt;&lt;span&gt;11.2 技术亮点&lt;/span&gt;&#xA;  &lt;a href=&#34;#112-%e6%8a%80%e6%9c%af%e4%ba%ae%e7%82%b9&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;前后端分离&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;独立开发和部署&lt;/li&gt;&#xA;&lt;li&gt;技术栈灵活选择&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;类型安全&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Python类型提示&lt;/li&gt;&#xA;&lt;li&gt;TypeScript静态检查&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;现代化UI&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Fluent UI设计系统&lt;/li&gt;&#xA;&lt;li&gt;响应式布局&lt;/li&gt;&#xA;&lt;li&gt;流畅动画&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;错误处理&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;分层错误处理&lt;/li&gt;&#xA;&lt;li&gt;友好错误提示&lt;/li&gt;&#xA;&lt;li&gt;详细日志记录&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;113-未来改进方向&#34;&gt;&lt;span&gt;11.3 未来改进方向&lt;/span&gt;&#xA;  &lt;a href=&#34;#113-%e6%9c%aa%e6%9d%a5%e6%94%b9%e8%bf%9b%e6%96%b9%e5%90%91&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;性能优化&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;并行处理&lt;/li&gt;&#xA;&lt;li&gt;缓存机制&lt;/li&gt;&#xA;&lt;li&gt;图像压缩&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;功能增强&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;病灶分割&lt;/li&gt;&#xA;&lt;li&gt;报告生成&lt;/li&gt;&#xA;&lt;li&gt;历史记录&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;用户体验&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;进度条&lt;/li&gt;&#xA;&lt;li&gt;批量导出&lt;/li&gt;&#xA;&lt;li&gt;结果对比&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;安全加固&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;用户认证&lt;/li&gt;&#xA;&lt;li&gt;权限管理&lt;/li&gt;&#xA;&lt;li&gt;审计日志&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;附录关键代码片段&#34;&gt;&lt;span&gt;附录：关键代码片段&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%99%84%e5%bd%95%e5%85%b3%e9%94%ae%e4%bb%a3%e7%a0%81%e7%89%87%e6%ae%b5&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;a1-vlm-api调用示例&#34;&gt;&lt;span&gt;A.1 VLM API调用示例&lt;/span&gt;&#xA;  &lt;a href=&#34;#a1-vlm-api%e8%b0%83%e7%94%a8%e7%a4%ba%e4%be%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;初始化客户端&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;client&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;VLMClient(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;api_key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;your-api-key&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;base_url&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://dashscope.aliyuncs.com/compatible-mode/v1&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;model_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;qwen3-vl-plus&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;编码图像&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;base64_image&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;encode_image_to_base64(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image.jpg&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;构建消息&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;messages&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;:&amp;ensp;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;请分析这张医学影像...&amp;#34;&lt;/span&gt;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;:&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;f&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data:image/jpeg;base64,&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&lt;/span&gt;base64_image&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;调用API&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(messages,&amp;ensp;max_tokens&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2000&lt;/span&gt;,&amp;ensp;temperature&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.3&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;a2-react组件状态管理示例&#34;&gt;&lt;span&gt;A.2 React组件状态管理示例&lt;/span&gt;&#xA;  &lt;a href=&#34;#a2-react%e7%bb%84%e4%bb%b6%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86%e7%a4%ba%e4%be%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;状态定义&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setFiles&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;File&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;[]&lt;/span&gt;&amp;gt;([]);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setResult&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;AnalysisResult&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;|&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;null&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;[&lt;span style=&#34;color:#a6e22e&#34;&gt;loading&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setLoading&lt;/span&gt;]&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;分析处理&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;handleAnalyze&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt;&amp;ensp;()&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setLoading&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;analysisResult&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;analyzeImages&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;files&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;categories&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setResult&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;analysisResult&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt;&amp;ensp;(&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;)&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setError&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;setLoading&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//&amp;ensp;条件渲染&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;loading&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&amp;ensp;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;Spinner&lt;/span&gt;&amp;ensp;/&amp;gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&amp;ensp;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;ResultsView&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;}&amp;ensp;/&amp;gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&amp;ensp;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;ErrorMessage&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;}&amp;ensp;/&amp;gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;p&gt;&lt;strong&gt;文档版本：&lt;/strong&gt; 1.0&lt;br&gt;&#xA;&lt;strong&gt;最后更新：&lt;/strong&gt; 2024年12月&lt;br&gt;&#xA;&lt;strong&gt;作者：&lt;/strong&gt; Nazelto&lt;br&gt;&#xA;&lt;strong&gt;联系方式：&lt;/strong&gt; &lt;a href=&#34;mailto:z15822621293@163.com&#34;target=&#34;_blank&#34; rel=&#34;external nofollow noopener noreferrer&#34;&gt;z15822621293@163.com&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Medical_imaging</title>
      <link>https://nazelto.github.io/medical-imaging/posts/medical-imaging/</link>
      <pubDate>Mon, 01 Dec 2025 20:40:14 +0800</pubDate>
      <guid>https://nazelto.github.io/medical-imaging/posts/medical-imaging/</guid>
      <description>&lt;p&gt;医学影像分析系统 - 函数文档与流程说明&lt;/p&gt;&#xA;&lt;h1 class=&#34;heading-element&#34; id=&#34;医学影像分析系统---函数文档与流程说明&#34;&gt;&lt;span&gt;医学影像分析系统 - 函数文档与流程说明&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8c%bb%e5%ad%a6%e5%bd%b1%e5%83%8f%e5%88%86%e6%9e%90%e7%b3%bb%e7%bb%9f---%e5%87%bd%e6%95%b0%e6%96%87%e6%a1%a3%e4%b8%8e%e6%b5%81%e7%a8%8b%e8%af%b4%e6%98%8e&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h1&gt;&lt;h2 class=&#34;heading-element&#34; id=&#34;项目概述&#34;&gt;&lt;span&gt;项目概述&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%a1%b9%e7%9b%ae%e6%a6%82%e8%bf%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;本项目是一个基于VLM（视觉语言模型）的医学影像分析系统，支持医学影像的自动分类、目标检测和批量分析。&lt;/p&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;系统架构&#34;&gt;&lt;span&gt;系统架构&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;CLI层&amp;ensp;(cli.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;分析核心层&amp;ensp;(analyzer.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;API通信层&amp;ensp;(api_client.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;工具函数层&amp;ensp;(utils.py)&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;类型定义层&amp;ensp;(types.py)&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;模块详解&#34;&gt;&lt;span&gt;模块详解&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%a8%a1%e5%9d%97%e8%af%a6%e8%a7%a3&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;1-utilspy---工具函数模块&#34;&gt;&lt;span&gt;1. utils.py - 工具函数模块&lt;/span&gt;&#xA;  &lt;a href=&#34;#1-utilspy---%e5%b7%a5%e5%85%b7%e5%87%bd%e6%95%b0%e6%a8%a1%e5%9d%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数encode_image_to_base64&#34;&gt;&lt;span&gt;函数：encode_image_to_base64()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0encode_image_to_base64&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：将图像文件编码为Base64字符串，用于通过API发送给VLM模型。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;以二进制模式打开图像文件&lt;/li&gt;&#xA;&lt;li&gt;读取文件内容&lt;/li&gt;&#xA;&lt;li&gt;编码为Base64格式&lt;/li&gt;&#xA;&lt;li&gt;解码为UTF-8字符串返回&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件的路径&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Base64编码的字符串&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;base64_str&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;encode_image_to_base64(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;path/to/image.jpg&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;返回:&amp;ensp;&amp;#34;iVBORw0KGgoAAAANSUhEUgAAAAUA...&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数extract_json_from_text&#34;&gt;&lt;span&gt;函数：extract_json_from_text()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0extract_json_from_text&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：从VLM模型的响应文本中提取JSON对象。模型可能在JSON前后添加其他文本，此函数负责定位并提取JSON部分。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;查找第一个左花括号 &lt;code&gt;{&lt;/code&gt; 的位置&lt;/li&gt;&#xA;&lt;li&gt;查找最后一个右花括号 &lt;code&gt;}&lt;/code&gt; 的位置&lt;/li&gt;&#xA;&lt;li&gt;检查是否找到有效的JSON范围&lt;/li&gt;&#xA;&lt;li&gt;尝试解析JSON字符串为字典&lt;/li&gt;&#xA;&lt;li&gt;如果解析失败，返回包含原始响应的字典&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;text&lt;/code&gt; (str): 包含JSON的文本&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;dict[str, Any]: 提取的JSON字典，或包含 &lt;code&gt;raw_response&lt;/code&gt; 的字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;text&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;模型分析结果如下：{&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;category&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:&amp;ensp;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;正常&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;,&amp;ensp;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;confidence&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;:&amp;ensp;95}&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;result&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;extract_json_from_text(text)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;返回:&amp;ensp;{&amp;#34;category&amp;#34;:&amp;ensp;&amp;#34;正常&amp;#34;,&amp;ensp;&amp;#34;confidence&amp;#34;:&amp;ensp;95}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数get_image_files_from_folder&#34;&gt;&lt;span&gt;函数：get_image_files_from_folder()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0get_image_files_from_folder&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：扫描指定文件夹及其子文件夹，找出所有支持的医学影像格式文件。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;将路径字符串转换为Path对象&lt;/li&gt;&#xA;&lt;li&gt;检查文件夹是否存在&lt;/li&gt;&#xA;&lt;li&gt;检查路径是否为目录&lt;/li&gt;&#xA;&lt;li&gt;定义支持的图像扩展名集合&lt;/li&gt;&#xA;&lt;li&gt;递归遍历文件夹中的所有文件&lt;/li&gt;&#xA;&lt;li&gt;筛选出图像文件&lt;/li&gt;&#xA;&lt;li&gt;返回排序后的文件路径列表&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;支持的图像格式&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;.jpg&lt;/code&gt;, &lt;code&gt;.jpeg&lt;/code&gt;, &lt;code&gt;.png&lt;/code&gt;, &lt;code&gt;.bmp&lt;/code&gt;, &lt;code&gt;.gif&lt;/code&gt;, &lt;code&gt;.webp&lt;/code&gt;, &lt;code&gt;.tiff&lt;/code&gt;, &lt;code&gt;.tif&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;folder_path&lt;/code&gt; (str): 文件夹路径&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;list[str]: 排序后的图像文件路径列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;异常&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;FileNotFoundError&lt;/code&gt;: 如果文件夹不存在&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;ValueError&lt;/code&gt;: 如果路径不是目录&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;images&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;get_image_files_from_folder(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;path/to/medical_images&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;返回:&amp;ensp;[&amp;#34;path/to/medical_images/image1.jpg&amp;#34;,&amp;ensp;&amp;#34;path/to/medical_images/image2.png&amp;#34;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;2-typespy---类型定义模块&#34;&gt;&lt;span&gt;2. types.py - 类型定义模块&lt;/span&gt;&#xA;  &lt;a href=&#34;#2-typespy---%e7%b1%bb%e5%9e%8b%e5%ae%9a%e4%b9%89%e6%a8%a1%e5%9d%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;p&gt;本模块定义了整个系统使用的数据结构，确保类型安全和代码可读性。&lt;/p&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;classificationresult&#34;&gt;&lt;span&gt;ClassificationResult&lt;/span&gt;&#xA;  &lt;a href=&#34;#classificationresult&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：存储单张医学影像的分类分析结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;字段&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;success&lt;/code&gt; (bool): 分类是否成功&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;result&lt;/code&gt; (dict[str, Any]): 分类结果的详细数据（包含category、confidence等）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;full_response&lt;/code&gt; (str): VLM模型的完整响应文本&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;error&lt;/code&gt; (str): 错误信息（如果分类失败）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;result:&amp;ensp;ClassificationResult&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_path&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image.jpg&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;:&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;X光片&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;category&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;肺炎&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;confidence&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#ae81ff&#34;&gt;92&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;features&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;右肺下叶有浸润影&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;reasoning&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;full_response&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;detectionobject&#34;&gt;&lt;span&gt;DetectionObject&lt;/span&gt;&#xA;  &lt;a href=&#34;#detectionobject&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：表示医学影像中检测到的异常区域或重要结构。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;字段&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;type&lt;/code&gt; (str): 对象类型（如&amp;quot;肺炎&amp;quot;、&amp;ldquo;肿瘤&amp;quot;等）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;bbox&lt;/code&gt; (list[float]): 边界框坐标 [x_min, y_min, x_max, y_max]，归一化到0-1&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;confidence&lt;/code&gt; (float): 检测置信度（0-100）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;size&lt;/code&gt; (str): 对象大小描述&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;description&lt;/code&gt; (str): 对象的详细描述&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;detectionresult&#34;&gt;&lt;span&gt;DetectionResult&lt;/span&gt;&#xA;  &lt;a href=&#34;#detectionresult&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：存储单张医学影像的目标检测分析结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;字段&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;success&lt;/code&gt; (bool): 检测是否成功&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;result&lt;/code&gt; (dict[str, Any]): 检测结果的详细数据&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;full_response&lt;/code&gt; (str): VLM模型的完整响应文本&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;error&lt;/code&gt; (str): 错误信息（如果检测失败）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;analysisresult&#34;&gt;&lt;span&gt;AnalysisResult&lt;/span&gt;&#xA;  &lt;a href=&#34;#analysisresult&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：存储批量医学影像分析的综合结果，包括分组、统计和解释。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;字段&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;total_images&lt;/code&gt; (int): 分析的图像总数&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;classification_results&lt;/code&gt; (list[ClassificationResult]): 所有图像的分类结果列表&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;grouped_by_category&lt;/code&gt; (dict[str, list[ClassificationResult]]): 按诊断类别分组的结果&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;explanations&lt;/code&gt; (dict[str, Any]): 每个类别的解释说明&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;statistics&lt;/code&gt; (dict[str, Any]): 统计信息（类别数、分布等）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;3-api_clientpy---vlm-api客户端模块&#34;&gt;&lt;span&gt;3. api_client.py - VLM API客户端模块&lt;/span&gt;&#xA;  &lt;a href=&#34;#3-api_clientpy---vlm-api%e5%ae%a2%e6%88%b7%e7%ab%af%e6%a8%a1%e5%9d%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;类vlmclient&#34;&gt;&lt;span&gt;类：VLMClient&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%b1%bbvlmclient&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：封装与VLM服务的HTTP通信，处理认证、请求构建和响应解析。支持上下文管理器协议，确保资源正确释放。&lt;/p&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法init&#34;&gt;&lt;span&gt;方法：&lt;strong&gt;init&lt;/strong&gt;()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95init&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;保存API配置参数&lt;/li&gt;&#xA;&lt;li&gt;创建HTTP会话对象&lt;/li&gt;&#xA;&lt;li&gt;设置认证头和内容类型&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;api_key&lt;/code&gt; (str): API密钥，用于身份验证&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;base_url&lt;/code&gt; (str): API服务的基础URL&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;model_name&lt;/code&gt; (str): 要使用的模型名称&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;client&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;VLMClient(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;api_key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sk-xxx&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;base_url&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://api.example.com/v1&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;model_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;qwen3-vl-plus&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法call&#34;&gt;&lt;span&gt;方法：call()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95call&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：调用VLM API进行推理。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;构建API端点URL&lt;/li&gt;&#xA;&lt;li&gt;组装请求负载（模型名、消息、参数）&lt;/li&gt;&#xA;&lt;li&gt;发送POST请求到VLM服务&lt;/li&gt;&#xA;&lt;li&gt;解析响应JSON&lt;/li&gt;&#xA;&lt;li&gt;提取模型生成的文本内容&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;messages&lt;/code&gt; (list[dict[str, Any]]): 消息列表，每条消息包含role和content&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;max_tokens&lt;/code&gt; (int, 默认2000): 模型生成的最大令牌数&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;temperature&lt;/code&gt; (float, 默认0.3): 生成温度（0.3表示低随机性，更确定性）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;str: 模型生成的响应文本&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;异常&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;RuntimeError&lt;/code&gt;: 如果响应格式无效或缺少预期字段&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;response&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;messages&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;:&amp;ensp;[&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;text&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;分析这张医学影像&amp;#34;&lt;/span&gt;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;,&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;:&amp;ensp;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data:image/jpeg;base64,...&amp;#34;&lt;/span&gt;}}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;max_tokens&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2000&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;temperature&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.3&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法close&#34;&gt;&lt;span&gt;方法：close()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95close&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：关闭HTTP会话，释放资源。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;上下文管理器支持&#34;&gt;&lt;span&gt;上下文管理器支持&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%8a%e4%b8%8b%e6%96%87%e7%ae%a1%e7%90%86%e5%99%a8%e6%94%af%e6%8c%81&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：支持with语句使用，确保资源正确释放。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;&amp;ensp;VLMClient(api_key,&amp;ensp;base_url,&amp;ensp;model_name)&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;client:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;response&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;client&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;call(messages)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;自动调用close()释放资源&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;4-analyzerpy---医学影像分析器模块&#34;&gt;&lt;span&gt;4. analyzer.py - 医学影像分析器模块&lt;/span&gt;&#xA;  &lt;a href=&#34;#4-analyzerpy---%e5%8c%bb%e5%ad%a6%e5%bd%b1%e5%83%8f%e5%88%86%e6%9e%90%e5%99%a8%e6%a8%a1%e5%9d%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;类medicalimageanalyzer&#34;&gt;&lt;span&gt;类：MedicalImageAnalyzer&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e7%b1%bbmedicalimageanalyzer&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：提供医学影像分析的主要功能，包括单张图像分类、目标检测、批量图像分析、结果分组和解释。&lt;/p&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法init-1&#34;&gt;&lt;span&gt;方法：&lt;strong&gt;init&lt;/strong&gt;()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95init-1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;创建VLM客户端实例&lt;/li&gt;&#xA;&lt;li&gt;保存API配置&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;api_key&lt;/code&gt; (str): VLM服务的API密钥&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;base_url&lt;/code&gt; (str): VLM服务的基础URL&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;model_name&lt;/code&gt; (str): 要使用的模型名称&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法classify_image&#34;&gt;&lt;span&gt;方法：classify_image()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95classify_image&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：对医学影像进行分类。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证图像文件是否存在&lt;/li&gt;&#xA;&lt;li&gt;将图像编码为Base64格式&lt;/li&gt;&#xA;&lt;li&gt;根据是否提供类别列表构建不同的提示词&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API进行分类&lt;/li&gt;&#xA;&lt;li&gt;从响应中提取JSON结果&lt;/li&gt;&#xA;&lt;li&gt;返回分类结果或错误信息&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt; (list[str] | None): 可选的分类类别列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ClassificationResult: 分类结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;异常&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;FileNotFoundError&lt;/code&gt;: 如果图像文件不存在&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回结果示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;True&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_path&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image.jpg&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;:&amp;ensp;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;image_type&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;X光片&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;category&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;肺炎&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;confidence&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#ae81ff&#34;&gt;92&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;features&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;右肺下叶有浸润影&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;reasoning&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;基于影像特征分析...&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;full_response&amp;#34;&lt;/span&gt;:&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;...&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法detect_objects&#34;&gt;&lt;span&gt;方法：detect_objects()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95detect_objects&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：在医学影像中检测目标对象。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;验证图像文件是否存在&lt;/li&gt;&#xA;&lt;li&gt;将图像编码为Base64格式&lt;/li&gt;&#xA;&lt;li&gt;如果提供了分类结果，提取分类信息作为上下文&lt;/li&gt;&#xA;&lt;li&gt;根据是否提供目标对象列表构建不同的提示词&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API进行目标检测&lt;/li&gt;&#xA;&lt;li&gt;从响应中提取JSON结果&lt;/li&gt;&#xA;&lt;li&gt;返回检测结果或错误信息&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;特点&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;支持基于分类结果的上下文检测&lt;/li&gt;&#xA;&lt;li&gt;如果分类结果显示异常，会特别强调检测异常区域&lt;/li&gt;&#xA;&lt;li&gt;返回边界框坐标和置信度&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;target_objects&lt;/code&gt; (list[str] | None): 可选的目标对象列表&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;classification_result&lt;/code&gt; (ClassificationResult | None): 可选的分类结果&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;DetectionResult: 检测结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法analyze_images&#34;&gt;&lt;span&gt;方法：analyze_images()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95analyze_images&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：分析医学影像（单张或多张）。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;规范化输入：将单个路径转换为列表，处理文件夹路径&lt;/li&gt;&#xA;&lt;li&gt;验证所有图像文件是否存在&lt;/li&gt;&#xA;&lt;li&gt;根据图像数量选择分析方式：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;单张图像：直接返回分类结果&lt;/li&gt;&#xA;&lt;li&gt;多张图像：进行分组、统计和解释&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;特点&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;支持灵活的输入格式（单个文件、文件列表、文件夹）&lt;/li&gt;&#xA;&lt;li&gt;自动处理文件夹中的所有图像&lt;/li&gt;&#xA;&lt;li&gt;返回结果格式根据图像数量自动调整&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_paths&lt;/code&gt; (str | list[str]): 单个图像路径、路径列表或文件夹路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt; (list[str] | None): 可选的分类类别列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;dict[str, Any]: 分析结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;异常&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;FileNotFoundError&lt;/code&gt;: 如果任何图像文件不存在&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法_analyze_single_image&#34;&gt;&lt;span&gt;方法：_analyze_single_image()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95_analyze_single_image&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：分析单张图像。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;调用classify_image方法进行分类&lt;/li&gt;&#xA;&lt;li&gt;返回分类结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_path&lt;/code&gt; (str): 图像文件路径&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt; (list[str] | None): 可选的分类类别列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ClassificationResult: 分类结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法_analyze_multiple_images&#34;&gt;&lt;span&gt;方法：_analyze_multiple_images()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95_analyze_multiple_images&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：分析多张图像。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;对每张图像进行分类&lt;/li&gt;&#xA;&lt;li&gt;按诊断类别对结果进行分组&lt;/li&gt;&#xA;&lt;li&gt;为每个类别生成解释说明&lt;/li&gt;&#xA;&lt;li&gt;计算统计信息&lt;/li&gt;&#xA;&lt;li&gt;返回综合分析结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;特点&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;自动分组相同诊断类别的图像&lt;/li&gt;&#xA;&lt;li&gt;生成每个类别的共同特征解释&lt;/li&gt;&#xA;&lt;li&gt;提供类别分布统计&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;image_paths&lt;/code&gt; (list[str]): 图像文件路径列表&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;categories&lt;/code&gt; (list[str] | None): 可选的分类类别列表&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;dict[str, Any]: 包含分组、统计和解释的综合分析结果&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法_explain_classification_groups&#34;&gt;&lt;span&gt;方法：_explain_classification_groups()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95_explain_classification_groups&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：解释为什么图像被分组在一起。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;遍历每个分类类别&lt;/li&gt;&#xA;&lt;li&gt;提取该类别中所有图像的特征和推理信息&lt;/li&gt;&#xA;&lt;li&gt;构建包含所有图像信息的提示词&lt;/li&gt;&#xA;&lt;li&gt;调用VLM API生成类别解释&lt;/li&gt;&#xA;&lt;li&gt;提取并保存解释结果&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;特点&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;为每个类别生成统一的解释&lt;/li&gt;&#xA;&lt;li&gt;分析类别内图像的共同特征&lt;/li&gt;&#xA;&lt;li&gt;识别图像之间的细微差异&lt;/li&gt;&#xA;&lt;li&gt;处理API调用失败的情况&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;grouped_images&lt;/code&gt; (dict[str, list[ClassificationResult]]): 按类别分组的图像结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;返回值&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;dict[str, Any]: 每个类别的解释说明字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;方法close-1&#34;&gt;&lt;span&gt;方法：close()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%96%b9%e6%b3%95close-1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：关闭分析器并释放资源。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;关闭VLM客户端的HTTP会话&lt;/li&gt;&#xA;&lt;li&gt;释放网络连接&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h5 class=&#34;heading-element&#34; id=&#34;上下文管理器支持-1&#34;&gt;&lt;span&gt;上下文管理器支持&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e4%b8%8a%e4%b8%8b%e6%96%87%e7%ae%a1%e7%90%86%e5%99%a8%e6%94%af%e6%8c%81-1&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：支持with语句使用，确保资源正确释放。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt;&amp;ensp;MedicalImageAnalyzer(api_key,&amp;ensp;base_url,&amp;ensp;model_name)&amp;ensp;&lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt;&amp;ensp;analyzer:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;results&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;analyzer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;analyze_images(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;path/to/images&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;自动调用close()释放资源&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h3 class=&#34;heading-element&#34; id=&#34;5-clipy---命令行界面模块&#34;&gt;&lt;span&gt;5. cli.py - 命令行界面模块&lt;/span&gt;&#xA;  &lt;a href=&#34;#5-clipy---%e5%91%bd%e4%bb%a4%e8%a1%8c%e7%95%8c%e9%9d%a2%e6%a8%a1%e5%9d%97&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数print_classification_results&#34;&gt;&lt;span&gt;函数：print_classification_results()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0print_classification_results&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：打印单张图像的分类结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;检查分类是否成功&lt;/li&gt;&#xA;&lt;li&gt;如果失败，打印错误信息&lt;/li&gt;&#xA;&lt;li&gt;如果成功，按格式化方式打印：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;图像基本信息（路径、类型）&lt;/li&gt;&#xA;&lt;li&gt;特征分析（关键特征、推理过程）&lt;/li&gt;&#xA;&lt;li&gt;分类结果（诊断类别、置信度、异常标记）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;results&lt;/code&gt; (dict[str, Any]): 分类结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;输出示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;============================================================&#xA;Classification&amp;ensp;Results&#xA;============================================================&#xA;&#xA;Image&amp;ensp;path:&amp;ensp;image.jpg&#xA;Image&amp;ensp;type:&amp;ensp;X光片&#xA;&#xA;【Image&amp;ensp;Feature&amp;ensp;Analysis】&#xA;------------------------------------------------------------&#xA;Key&amp;ensp;features:&#xA;&amp;ensp;&amp;ensp;右肺下叶有浸润影&#xA;&#xA;Analysis&amp;ensp;reasoning:&#xA;&amp;ensp;&amp;ensp;基于影像特征分析...&#xA;&#xA;【Classification&amp;ensp;Result】&#xA;------------------------------------------------------------&#xA;Diagnosis&amp;ensp;category:&amp;ensp;肺炎&#xA;Confidence:&amp;ensp;92%&#xA;Abnormal:&amp;ensp;Yes&#xA;&#xA;============================================================&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数print_multiple_analysis_results&#34;&gt;&lt;span&gt;函数：print_multiple_analysis_results()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0print_multiple_analysis_results&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：打印多张图像的分析结果。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;打印总体统计信息（图像总数、类别数、分布）&lt;/li&gt;&#xA;&lt;li&gt;遍历每个分类类别&lt;/li&gt;&#xA;&lt;li&gt;对于每个类别，打印：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;类别名称和图像数量&lt;/li&gt;&#xA;&lt;li&gt;共同特征&lt;/li&gt;&#xA;&lt;li&gt;分类原因&lt;/li&gt;&#xA;&lt;li&gt;相似性分析&lt;/li&gt;&#xA;&lt;li&gt;差异分析&lt;/li&gt;&#xA;&lt;li&gt;总结说明&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;参数&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;results&lt;/code&gt; (dict[str, Any]): 多张图像分析结果字典&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h4 class=&#34;heading-element&#34; id=&#34;函数main&#34;&gt;&lt;span&gt;函数：main()&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%87%bd%e6%95%b0main&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;用途&lt;/strong&gt;：主CLI入口点。&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;流程&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;打印欢迎信息&lt;/li&gt;&#xA;&lt;li&gt;初始化医学影像分析器&lt;/li&gt;&#xA;&lt;li&gt;定义分类类别列表&lt;/li&gt;&#xA;&lt;li&gt;获取用户输入的图像路径（命令行参数或交互式输入）&lt;/li&gt;&#xA;&lt;li&gt;验证路径是否存在&lt;/li&gt;&#xA;&lt;li&gt;调用分析器进行分析&lt;/li&gt;&#xA;&lt;li&gt;根据结果类型选择合适的打印函数&lt;/li&gt;&#xA;&lt;li&gt;处理异常并确保资源释放&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;&lt;strong&gt;支持的分类类别&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Normal（正常）&lt;/li&gt;&#xA;&lt;li&gt;Pneumonia（肺炎）&lt;/li&gt;&#xA;&lt;li&gt;Tuberculosis（结核病）&lt;/li&gt;&#xA;&lt;li&gt;Lung Cancer（肺癌）&lt;/li&gt;&#xA;&lt;li&gt;Other Abnormalities（其他异常）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;strong&gt;使用示例&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;命令行参数方式&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;python&amp;ensp;-m&amp;ensp;medical_imaging.cli&amp;ensp;path/to/image.jpg&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;交互式输入方式&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;python&amp;ensp;-m&amp;ensp;medical_imaging.cli&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#&amp;ensp;然后输入图像路径或文件夹路径&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;完整工作流程&#34;&gt;&lt;span&gt;完整工作流程&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%ae%8c%e6%95%b4%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;单张图像分析流程&#34;&gt;&lt;span&gt;单张图像分析流程&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%8d%95%e5%bc%a0%e5%9b%be%e5%83%8f%e5%88%86%e6%9e%90%e6%b5%81%e7%a8%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;用户输入图像路径&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;main()&amp;ensp;验证路径&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;analyzer.analyze_images()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;_analyze_single_image()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;classify_image()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;验证文件存在&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;encode_image_to_base64()&amp;ensp;编码图像&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;构建提示词&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;client.call()&amp;ensp;调用VLM&amp;ensp;API&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;extract_json_from_text()&amp;ensp;提取结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;└─&amp;ensp;返回ClassificationResult&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;print_classification_results()&amp;ensp;打印结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;analyzer.close()&amp;ensp;释放资源&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;多张图像分析流程&#34;&gt;&lt;span&gt;多张图像分析流程&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%a4%9a%e5%bc%a0%e5%9b%be%e5%83%8f%e5%88%86%e6%9e%90%e6%b5%81%e7%a8%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;用户输入文件夹路径&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;main()&amp;ensp;验证路径&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;analyzer.analyze_images()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;get_image_files_from_folder()&amp;ensp;获取所有图像&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;_analyze_multiple_images()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;对每张图像调用&amp;ensp;classify_image()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;按category分组结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;_explain_classification_groups()&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;│&amp;ensp;&amp;ensp;├─&amp;ensp;为每个类别提取图像信息&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;│&amp;ensp;&amp;ensp;├─&amp;ensp;构建解释提示词&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;│&amp;ensp;&amp;ensp;├─&amp;ensp;client.call()&amp;ensp;生成解释&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;│&amp;ensp;&amp;ensp;└─&amp;ensp;保存解释结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;├─&amp;ensp;计算统计信息&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;└─&amp;ensp;返回AnalysisResult&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;print_multiple_analysis_results()&amp;ensp;打印结果&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;↓&#xA;analyzer.close()&amp;ensp;释放资源&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;api请求格式&#34;&gt;&lt;span&gt;API请求格式&lt;/span&gt;&#xA;  &lt;a href=&#34;#api%e8%af%b7%e6%b1%82%e6%a0%bc%e5%bc%8f&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;vlm-api-请求示例&#34;&gt;&lt;span&gt;VLM API 请求示例&lt;/span&gt;&#xA;  &lt;a href=&#34;#vlm-api-%e8%af%b7%e6%b1%82%e7%a4%ba%e4%be%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;max_tokens&#34;: 2000,&#xA;&amp;ensp;&amp;ensp;&#34;messages&#34;: [&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;content&#34;: [&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;text&#34;: &#34;请对这张医疗影像进行专业分类...&#34;,&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;type&#34;: &#34;text&#34;&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;image_url&#34;: {&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;url&#34;: &#34;data:image/jpeg;base64,iVBORw0KGgo...&#34;&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;},&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;type&#34;: &#34;image_url&#34;&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;],&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;role&#34;: &#34;user&#34;&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&amp;ensp;&amp;ensp;],&#xA;&amp;ensp;&amp;ensp;&#34;model&#34;: &#34;qwen3-vl-plus&#34;,&#xA;&amp;ensp;&amp;ensp;&#34;temperature&#34;: 0.3&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;vlm-api-响应示例&#34;&gt;&lt;span&gt;VLM API 响应示例&lt;/span&gt;&#xA;  &lt;a href=&#34;#vlm-api-%e5%93%8d%e5%ba%94%e7%a4%ba%e4%be%8b&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;{&#xA;&amp;ensp;&amp;ensp;&#34;choices&#34;: [&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;{&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;message&#34;: {&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&#34;content&#34;: &#34;{\&#34;image_type\&#34;: \&#34;X光片\&#34;, \&#34;category\&#34;: \&#34;肺炎\&#34;, \&#34;confidence\&#34;: 92, \&#34;features\&#34;: \&#34;右肺下叶有浸润影\&#34;, \&#34;reasoning\&#34;: \&#34;...\&#34;}&#34;&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;}&#xA;&amp;ensp;&amp;ensp;]&#xA;}&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;错误处理&#34;&gt;&lt;span&gt;错误处理&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;系统在以下情况下会返回错误：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;文件不存在&lt;/strong&gt;：&lt;code&gt;FileNotFoundError&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;路径不是目录&lt;/strong&gt;：&lt;code&gt;ValueError&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;API响应格式无效&lt;/strong&gt;：&lt;code&gt;RuntimeError&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;网络连接失败&lt;/strong&gt;：&lt;code&gt;requests.RequestException&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;JSON解析失败&lt;/strong&gt;：返回 &lt;code&gt;{&amp;quot;raw_response&amp;quot;:&amp;ensp;text}&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;所有异常都会被捕获并返回包含 &lt;code&gt;success:&amp;ensp;False&lt;/code&gt; 和 &lt;code&gt;error&lt;/code&gt; 字段的结果。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;配置参数&#34;&gt;&lt;span&gt;配置参数&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;vlm-api-配置&#34;&gt;&lt;span&gt;VLM API 配置&lt;/span&gt;&#xA;  &lt;a href=&#34;#vlm-api-%e9%85%8d%e7%bd%ae&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DEFAULT_VLM_API_KEY&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sk-854d708e4615444689646f3f7f979b8b&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DEFAULT_VLM_BASE_URL&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://dashscope.aliyuncs.com/compatible-mode/v1&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DEFAULT_VLM_MODEL_NAME&amp;ensp;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&amp;ensp;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;qwen3-vl-plus&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 class=&#34;heading-element&#34; id=&#34;分类参数&#34;&gt;&lt;span&gt;分类参数&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e5%88%86%e7%b1%bb%e5%8f%82%e6%95%b0&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h3&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;max_tokens&lt;/code&gt;: 2000（分类任务）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;max_tokens&lt;/code&gt;: 3000（检测任务）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;temperature&lt;/code&gt;: 0.3（低随机性，确定性强）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 class=&#34;heading-element&#34; id=&#34;总结&#34;&gt;&lt;span&gt;总结&lt;/span&gt;&#xA;  &lt;a href=&#34;#%e6%80%bb%e7%bb%93&#34; class=&#34;heading-mark&#34;&gt;&#xA;    &lt;svg class=&#34;octicon octicon-link&#34; viewBox=&#34;0 0 16 16&#34; version=&#34;1.1&#34; width=&#34;16&#34; height=&#34;16&#34; aria-hidden=&#34;true&#34;&gt;&lt;path d=&#34;m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#xA;  &lt;/a&gt;&#xA;&lt;/h2&gt;&lt;p&gt;这个医学影像分析系统通过模块化设计，清晰地分离了各个功能层：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;工具层&lt;/strong&gt;：处理基础操作（编码、提取、扫描）&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;类型层&lt;/strong&gt;：定义数据结构&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;通信层&lt;/strong&gt;：处理API交互&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;分析层&lt;/strong&gt;：实现核心分析逻辑&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;界面层&lt;/strong&gt;：提供用户交互&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;整个系统支持灵活的输入方式、完善的错误处理和资源管理，可以高效地处理单张或批量医学影像分析任务。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
